/*!*******************************************
* css-to-xpath-converter 1.0.0
* https://github.com/angezid/css-to-xpath-converter
* MIT licensed
* Copyright (c) 2024â€“2025, angezid
*********************************************/
function e(e,t){const n=t?/(?:[^'" |]|"[^"]*"|'[^']*')+|( or |\|)/g:/(?:[^'" ]|'[^']*'|"[^"]*")+|( or )/g;let s;for(;s=n.exec(e);)if(s[1])return!0;return!1}function t(n){this.axis="",this.separator="",this.owner="",this.parentNode=n,this.previousNode,this.childNodes,this.content,this.addChild=function(e){this.childNodes||(this.childNodes=[]),this.childNodes.push(e)},this.add=function(){let t="",n=arguments,s=!1;for(let a=0;a<n.length;a++)a===n.length-1&&"boolean"==typeof n[a]?s=!0:e(n[a],!0)?(t+=n[a],s=!0):t+=n[a];this.content||(this.content=[]),this.content.push({str:t,forbid:s})},this.hasAxis=function(e){if(this.axis===e)return!0;if(this.childNodes)for(let t=0;t<this.childNodes.length;t++)if(this.childNodes[t].hasAxis(e))return!0;return!1},this.clone=function(){const e=new t;return e.owner=this.owner,e.isClone=!0,e},this.toString=function(e=""){if(!this.isClone){e=this.separator+this.axis+this.owner;const n=this.content;if(n){const s=n.length;if(1===s)e+=this.or?n[0].str:"["+t(n[0].str)+"]";else{let a=!1;for(let r=0;r<s;r++){const o=n[r],i=t(o.str),c=r+1===s;o.forbid?(e+="["+i+"]",a=!1):(e+=(a?" and ":"[")+i,r+1<s&&!n[r+1].forbid?(e+=c?"]":"",a=!0):(e+="]",a=!1))}}}}function t(e){return e.replace(/\x01\[((?:[^"'\x01\x02]|"[^"]*"|'[^']*')+)\]\x02/g,"$1")}return this.childNodes&&this.childNodes.forEach((t=>{e+=t.toString(e)})),e}}function n(e,t,s,a,r){const o=new Error(s,a,r);return o.parser=!0,o.column=t,o.code=e,Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,n),o}n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(n,Error):n.__proto__=Error;const s=/(?:[a-zA-Z]+\|)?(?:[a-zA-Z][^ -,.\/:-@[-^`{-~]*)|(?:[a-zA-Z]+\|*)/y,a=/(?:^\\00003\d+)?(?:\\[^ ]|[^\t-,.\/:-@[-^`{-~])+/y,r=/((?:[a-z]+-)*[a-z]+)(?:([(])|(?=[ ,:+>~!^]|$))/y,o=/^([+-])?([0-9]+)?n(?:([+-])([0-9]+))?$/,i=/(?:(?:\*|[a-zA-Z]+)\|)?(?:\*|[^ -,.\/:-@[-^`{-~]+)/y,c=/(?:[a-zA-Z]+\|)?[^ -,.\/:-@[-^`{-~]+(?=(?:[~^|$!*]?=)|\])/y,l=/(?:"([^"]*)"|'([^']*)'|((?:\\[^ ]|[^ "'\]])+))(?: +([siSI]))?(?=\])/y,d=Object.freeze({Text:0,PseudoClass:1,AttributeName:2,AttributeValue:3}),u="Pseudo-class ':",f="preceding-sibling::",h="following-sibling::",p="ancestor::",b="\nSystem.Xml.XPath.XPathNavigator doesn't support '*' as a namespace.";let g,m,k,w,x,$,N,y,A;function z(n,s){ce(n),g=Object.assign({},{axis:".//",consoleUse:!1,standard:!1,removeXPathSpaces:!1,uppercaseLetters:"",lowercaseLetters:"",postprocess:!0,translate:!0,debug:!1},s),m="",k="",$=[];const a=new t;let r,o;try{w=g.uppercaseLetters?g.uppercaseLetters.trim():"",x=g.lowercaseLetters?g.lowercaseLetters.trim():"",w.length!==x.length&&fe("Custom letters have different length"),o=function(e){const t=",>+=~^!:([",n=",>+=~^!$]()";N=e,A=N.length;let s=!1,a=!1,r="\0";const o=[];for(let e=0;e<A;e++){const c=N[e];if(" "===c||/\s/.test(c)){if(a)continue;s&&(t.includes(r)?(s=!1,a=!1):a=!0)}else if("\\"===c)(e+1>=A||/\s/.test(N[e+1]))&&he(e,c,"Non-escape character",N),o.push(c,N[++e]);else if("/"===c&&ie(e,"*")){e+=2;const t=i(e,c,!0);-1===t?o.push("/*"):e=t}else if('"'===c||"'"===c){const t=i(e,c,!1);-1!==t?(o.push(N.substring(e,t+1)),e=t):he(e,c,"function normalizeWhiteSpaces()",N),s=!0,r=c}else!a||n.includes(c)||"*"===c&&ie(e,"=")||o.push(" "),o.push(c),s=!0,a=!1,r=c}function i(e,t,n){for(;++e<A;)if(N[e]===t){if(n&&"*"!==N[e-1])continue;return e}return-1}return o.join("")}(n),r=S(a,o,g.axis,null),r=function(t){if(g.postprocess){g.removeXPathSpaces&&(t=t.replace(/("[^"]+"|'[^']+')|([,<=>|+-]) +| +(?=[<=>|+-])/g,((e,t,n)=>t||n||"")));const n=t.split(/(?<!\| *)(\bself::node\(\)\[)/g);t="";for(let s=0;s<n.length;s++)if("self::node()["===n[s]){const a=n[s+1],r=re(0,"["+a,!0,"[","]");if(r){const o=r.content,i=a.substr(r.index);e(o)||/^(?:\[| *\|)/.test(i)&&!o.endsWith("]")?t+=n[s]:(t+=o+i,s++)}}else t+=n[s];t=(t=(t=t.replace(/([[(])\{((?:[^'"{}]|'[^']*'|"[^"]*")+)\}([\])])/g,"$1$2$3")).replace(/([/:])\*\[self::(\w+)(\[(?:[^"'[\]]|'[^']*'|"[^"]*")+\])?\]/g,"$1$2$3")).replace(/\/child::/g,"/")}return t=t.replace(/(?:[^'"{}]|'[^']*'|"[^"]*")+|([{}])/g,((e,t)=>t?"{"===t?"(":")":e)),t}(r)}catch(e){return e.parser?g.debug&&console.log(e.message,e.code,e.column):console.error(e),{xpath:r,css:o,warning:m,error:e.message}}return{xpath:r,css:o,warning:m,error:k}}function v(e,t,n,s,a){t||fe("':"+a.name+"()' has missing argument"),$.push(N);const r=S(e,t,n,s,a);return N=$.pop(),A=N.length,r}function S(e,t,n,s,r){ce(t);let o=C(e,null),i=C(o,null);const c=r?r.name:"",l=r&&r.predicate,u="not"===c;let g,m=null,k=null,w=null,x=null,$=d.Text,z=!1,v=!0,S=-1,j=N[0];for(N=t,A=N.length,(/^[,(]/.test(N)||!c&&/^[>+~^!]/.test(j))&&X(),/[.#[:>+~^!]$/.test(N)&&(j=N[A-1],X(A));++S<A;)if(y=S,j=N[S],$===d.Text){switch((z&&!/[>+~^!.#*:|[@a-zA-Z]/.test(j)||!z&&!/[ ,>+~^!.#*:|[@a-zA-Z]/.test(j))&&he(S,j,E($)+", check="+z,N),r&&/!?[+~]/.test(j)&&c.endsWith("-sibling")&&fe("'"+c+"()' with these arguments has no implementation"),(/[.#:[]/.test(j)||"has"!==c&&i.previousNode&&/[>+~^!]/.test(j))&&(I(n,i,r),L(s,i)),j){case".":let t="";do{if([S,g]=ee(S+1),t+=q("@class",K(" "+g+" ")),a.lastIndex=S+2,!ie(S,".")||!a.test(N))break;t+=" and "}while(++S<A);i.add(t),z=!1;break;case"#":[S,g]=ee(S+1),i.add("@id=",K(g)),z=!1;break;case">":i=u?P(o,i,"parent::"):C(o,i,"child::","/"),z=!0;break;case"+":i=O(o,i,u?f:h,"*","1"),z=!0;break;case"~":i=u?P(o,i,f):C(o,i,h,"/"),z=!0;break;case"^":i=u?P(o,i,"parent::",F(f)):O(o,i,"child::","*","1"),z=!0;break;case"!":ie(S,"^")?(i=u?P(o,i,"parent::",F(h)):O(o,i,"child::","*","last()"),S++):ie(S,"+")?(i=O(o,i,u?h:f,"*","1"),S++):ie(S,">")?(i=u?P(o,i,"child::"):C(o,i,"parent::","/"),S++):ie(S,"~")?(i=u?P(o,i,h):C(o,i,f,"/"),S++):i=u?P(o,i,"descendant-or-self::"):C(o,i,"ancestor-or-self::","/"),z=!0;break;case"[":m="",k=null,w=null,x=null,$=d.AttributeName;break;case":":ie(S,":")&&X(1),$=d.PseudoClass;break;case",":S+1>=A&&X(),o=C(e,o),o.or=!0,o.add(l?" or ":" | "),o=C(e,o),i=C(o,null,r?"":n),z=!0;break;case"@":[S,i]=Z(S,n,r,o,i),z=!1;break;case"*":I(n,i,r),i.owner="*",z=!1;break;case" ":r?"has-ancestor"===c?i=C(o,i,p," and "):["has-parent","before","after"].includes(c)||c.endsWith("-sibling")?(i.previousNode||(i.axis=p,i.separator=""),i=C(o,i,p," and ")):"not"===c&&"self::"===i.axis?(i.previousNode&&i.previousNode.axis===p&&(i.separator=" and "),i.and=!0,i=P(o,i,p)):i=C(o,i,null,"//"):i=C(o,i,null,"//"),z=!0;break;case"|":ie(S,"|")?X(1):[S,i]=T(S,n,v,o,i),z=!1;break;case"\\":S++;break;default:/[a-zA-Z]/.test(j)?(i.owner&&X(),I(n,i,r),S=Y(S,i)):X(),z=!1}v=!1}else if($===d.AttributeName)switch(j){case"=":x="=",k=null,$=d.AttributeValue;break;case"!":case"~":case"^":case"$":case"*":case"|":ie(S,"=")?(x=j+"=",S++,k=null,$=d.AttributeValue):"*"===j&&ie(S,"|")?(m="*:",S++,le(b)):X();break;case"]":m||ue("attrName is null or empty.'"),i.add("@"+m),$=d.Text,z=!1;break;case" ":break;default:[S,g]=se(S),m+=g}else if($===d.AttributeValue)switch(j){case"]":null===k&&ue("attrValue is null."),V(m,k,x,w,i),$=d.Text,z=!1;break;case"=":X();break;case" ":break;default:k&&ue("attrValue '"+k+"' is already parse: "+N.substr(S)),[S,k,w]=ae(S)}else if($===d.PseudoClass){let e="",t="";[S,e,t]=te(S),"root"===e?(i.owner=i.separator="",i.axis="//",i=C(o,i,"ancestor-or-self::"),i.owner="*",i.add("last()")):(L(s,i),e.startsWith("nth-")?U(e,t,r,i):R(e,t,u,i)),$=d.Text,z=!1}let W=e.toString();function X(e){he(S+(e||0),j,E($),N)}return(z||$!==d.Text)&&ue("Something is wrong: '"+E($)+"', selector='"+N+"', xpath='"+W+"'"),W}function E(e){return"State."+Object.keys(d)[e]}function C(e,n,s,a){const r=new t(e);return e.addChild(r),r.previousNode=n,r.axis=s||"",a&&n.owner&&(r.separator=a),r}function P(e,t,n,s){"node()"===t.owner&&(t.owner="*"),t.axis=n;var a=C(e,t,"self::","/");return s&&a.add(s),a}function O(e,t,n,s,a){const r=C(e,t,n,"/");return r.owner=s,r.add(a,!0),C(e,r,"self::","/")}function I(e,t,n){if(!e||t.axis||"self::"===e&&!n)return;const s=t.parentNode.toString().trim();(0==s.length||j(s))&&(t.axis=e)}function L(e,t){if(t.owner)return;let n="";if(t.previousNode){const s=t.parentNode.toString().trim();if(s.length)if(j(s))n=e||"*";else{const t=s[s.length-1];e?":"===t?n="*":"/"===t&&(n=e):":"!==t&&"/"!==t||(n="*")}}else n=e||"*";t.owner=n}function j(e){return/(?: or|\|)$/.test(e)}function T(e,t,n,s,a){if("*"==a.owner)ie(e,"*")?(a.owner="*:*",e++):a.owner="*:",le(b);else if(n&&I(t,a),ie(e,"*"))a.owner?a.owner+=":*":(a.owner="*",a.add("not(contains(name(), ':'))")),e++;else{if(e+1<A&&/[a-zA-Z]/.test(N[e+1])){let t=C(s,a,"self::","/");return t.owner="*",[e,t]}a.owner="*:",le(b)}return[e,a]}function Z(e,t,n,s,a){const r=a.parentNode.toString().trim();if(0===r.length)n&&(t="");else if(j(r))t="";else{const e=r[r.length-1];t=":"!==e&&"/"!==e?"/":""}i.lastIndex=e+1;const o=i.exec(N);if(null!==o){const n=C(s,a,t);return n.add("@",o[0].replace("|",":").toLowerCase()),[e+o[0].length,n]}pe(e,"parseAttribute",i)}function V(e,t,n,s,a){if(!t.trim())return void("="===n?a.add("@",e," = ''"):"!="===n?a.add("{not(@",e,") or @",e," != ''}"):"|="===n?a.add("@",e," = ''"):a.add("false()",!0));const r="i"===s||"lang"===e||"type"===e&&"input"==ne(a);if(!g.standard&&"class"===e)return void function(e,t,n,s){const a=n?H("@class"):"@class";let r=e.trim();switch(t){case"=":case"~=":case"!=":r=" "+r+" ";break;case"^=":r=" "+r;break;case"$=":r+=" "}r=n?G(r):K(r);if("!="===t)s.add("{not(",a,") or not(",q(a,r),")}");else if("*="===t)s.add("contains(",a,", ",r,")");else if("|="===t){const t=n?G(" "+e+" "):K(" "+e+" "),r=n?G(" "+e+"-"):K(" "+e+"-");s.add("{",q(a,t)," or ",q(a,r),"}")}else s.add(q(a,r))}(t,n,r,a);const o=r?H("@"+e):"@"+e,i=r?G(t):K(t);switch(n){case"=":a.add(o," = ",i);break;case"!=":a.add("{not(@",e,") or ",o,"!=",i,"}");break;case"~=":a.add("contains(concat(' ', normalize-space(",o,"), ' '), concat(' ', normalize-space(",i,"), ' '))");break;case"|=":const n=r?"concat("+i+", '-')":K(t+"-");a.add("{",o," = ",i," or starts-with(",o,", ",n,")}");break;case"^=":a.add("starts-with(",o,", ",i,")");break;case"$=":a.add(W(o,"@"+e,K(t),i));break;case"*=":a.add("contains(",o,", ",i,")")}}function q(e,t){return`contains(concat(' ', normalize-space(${e}), ' '), ${t})`}function R(e,t,n,s){let a,r,o,i,c="",l="local-name()";switch(e){case"any-link":s.add("(",l," = 'a' or ",l," = 'area') and @href");break;case"external":s.add("(",l," = 'a' or ",l," = 'area') and (starts-with(@href, 'https://') or starts-with(@href, 'http://'))");break;case"contains":s.add("contains(normalize-space(), ",J(t,e),")");break;case"icontains":s.add("contains(",G(),", ",m(t),")");break;case"empty":s.add("not(*) and not(text())");break;case"dir":i=K(t);const k=/ltr/.test(i);s.add(k?"{not(ancestor-or-self::*[@dir]) or ":"","ancestor-or-self::*[@dir][1][@dir = ",i,"]",k?"}":"");break;case"first-child":s.add(F(f));break;case"first":n?s.add(t?b(f," <= "):F(f)):s.add(t?"position() <= "+Q(t,e):"1",!t);break;case"first-of-type":o=ne(s,e),s.add(F(f,o));break;case"gt":case"skip":n?s.add(b(f," > ")):s.add("position() > ",Q(t,e));break;case"lt":n?s.add(b(f," <= ")):s.add("position() < ",Q(t,e));break;case"eq":case"nth":n?s.add(b(f," = ")):s.add(Q(t,e),!0);break;case"last-child":s.add(F(h));break;case"only-child":s.add("not(",f,"*) and not(",h,"*)");break;case"only-of-type":o=ne(s,e),s.add("not(",f,o,") and not(",h,o,")");break;case"text":s.add("@type='text'");break;case"starts-with":s.add("starts-with(normalize-space(), ",J(t,e),")");break;case"istarts-with":s.add("starts-with(",G(),", ",m(t),")");break;case"ends-with":c=J(t,e),s.add(W("normalize-space()","normalize-space()",c,c));break;case"iends-with":c=m(t),s.add(W(G(),"normalize-space()",J(t,e),c));break;case"is":case"matches":a=s.clone(),r=v(a,t,"self::","node()",{predicate:!0,name:e}),s.add(r);break;case"not":a=s.clone(),r=v(a,t,"self::","node()",{name:e}),"self::node()"!==r&&(r=function(e){let t="";return e.childNodes.forEach((e=>{if(e.childNodes){let n="",s="",a=!1;for(let t=e.childNodes.length-1;t>=0;t--){const r=e.childNodes[t];a?(r.separator="",n+="["+r.toString(),s+="]"):(r.separator&&(a=!0,r.separator=""),n+=r.toString())}t+=n+s}else t+=e.toString()})),t}(a),s.add("not("+r+")"));break;case"has":a=s.clone(),r=v(a,t,".//",null,{name:e}),s.add(r);break;case"has-sibling":a=s.clone();let w=v(a,t,f,null,{name:e});a.hasAxis(p)&&(w=X(a,f)),a=s.clone();let x=v(a,t,h,null,{name:e});a.hasAxis(p)&&(x=X(a,h)),s.add("{(",w,") or (",x,")}");break;case"has-parent":d("parent::");break;case"has-ancestor":a=s.clone(),r=v(a,t,p,null,{name:e}),s.add(r);break;case"after":d("preceding::");break;case"after-sibling":d(f);break;case"before":d("following::");break;case"before-sibling":d(h);break;case"last":n?s.add(t?b(h," <= "):F(h)):s.add(t?"position() > last() - "+Q(t,e):"last()",!t);break;case"last-of-type":o=ne(s,e),s.add(F(h,o));break;case"skip-first":n?s.add(t?b(f," > "):F(f)):s.add("position() > ",t?Q(t,e):"1",!t);break;case"skip-last":n?s.add(t?b(h," > "):F(h)):s.add("position() < last()",t?" - "+(Q(t,e)-1):"");break;case"limit":n?s.add(b(f," <= ")):s.add("position() <= ",Q(t,e));break;case"lang":c=function(e,t){const n=H("@lang",!0),s=t.split(",");let a="";for(let t=0;t<s.length;t++){t>0&&(a+=" or "),a+="ancestor-or-self::*[@lang][1][";const l=/^([a-z]+\b|\*)(?:-([a-z]+\b|\*))?(?:-([^-]+))?/i.exec(oe(s[t].trim()));if(l){if("*"===l[1])if(r(l[2]))a+=i(l[2]+(r(l[3])?"-"+l[3]:""));else{if(!r(l[3]))return"";a+=i(l[3])}else if("*"===l[2]){const e=c(l[1]+"-");r(l[3])?a+="starts-with("+n+", "+e+") and ("+i(l[3])+")":a+=o(l[1])}else{a+=o(l[1]+(l[2]?"-"+l[2]:"")+(r(l[3])?"-"+l[3]:""))}a+="]"}else fe(u+e+"()' has wrong argument(s)")}function r(e){return e&&"*"!==e}function o(e){const t=c(e);return n+" = "+t+" or starts-with("+n+", concat("+t+", '-'))"}function i(e){const t=c("-"+e+"-"),s=c("-"+e);return"contains(substring("+n+", string-length(substring-before("+n+", "+t+"))), "+t+") or "+W(n,"@lang",s,s)}function c(t){return t=K(t,e),g.translate?H(t,!0):t}return a}(e,t),c&&s.add("{",c,"}");break;case"range":const $=t.split(",");2!==$.length&&fe(u+e+"(,)' is required two numbers");const N=Q($[0],e),y=Q($[1],e);N>=y&&fe(u+e+"("+N+", "+y+")' have wrong arguments"),n?(c=M(f,"*",{count:N-1,comparison:" >= "})+" and ",c+=M(f,"*",{count:y-1,comparison:" <= "}),s.add(c)):s.add("position() >= ",N," and position() <= ",y);break;case"target":s.add("starts-with(@href, '#')");break;case"disabled":s.add("@disabled");break;case"enabled":s.add("not(@disabled)");break;case"selected":s.add(l," = 'option' and @selected");break;case"checked":s.add("(",l," = 'input' and (@type='checkbox' or @type='radio') or ",l," = 'option') and @checked");break;default:ue(u+e+"' is not implemented")}function d(n){const a=s.clone();let r=v(a,t,n,null,{name:e});a.hasAxis(p)&&(r=X(a,n)),s.add(r)}function b(n,s){return M(n,"*",{count:Q(t,e)-1,comparison:s})}function m(t){const n=J(t,e);return g.translate?H(n):n}}function W(e,t,n,s){return"substring("+e+", string-length("+t+") - (string-length("+n+") - 1)) = "+s}function X(e,t){let n="";return e.childNodes.forEach((e=>{if(e.hasAxis(p)){let s="";const a=e.childNodes.length-1;e.childNodes.forEach(((e,n)=>{n<a?s+=e.toString():(e.axis=t,e.separator="",s=e.toString()+"["+s+"]")})),n+=s}else n+=e.toString()})),n}function U(e,t,n,s){ce(t);let a,r="*",o="";if("nth-child"===e||"nth-last-child"===e){const n=function(e,t,n){let s,a="*";const r=/ +of +(.+)$/,o=r.exec(t);if(null!==o){const i=n.clone();s=v(i,o[1],"self::","node()",{predicate:!0,name:e});let c="";return i.childNodes.forEach((e=>{const t=e.toString();if(e.childNodes){const n=e.childNodes[0];"node()"===n.owner?(n.axis="",n.owner="",c+=""+e.toString()+""):c+=t}else c+=t})),c!==s&&(s=c),a+="["+s+"]",{arg:t.replace(r,""),owner:a,ofResult:s}}return null}(e,t,s);n&&(t=n.arg,r=n.owner,a=n.ofResult,a||(s.owner=r))}if(function(e,t,n){const s=t&&"not"===t.name,a="' with these arguments yield no matches";if(/^(?:-?0n?|-n(?:[+-]0|-\d+)?|(?:0|-\d+)n(?:-\d+)?|(?:0|-\d+)n\+0)$/.test(e)){if(s)return!1;fe(u+n+a)}s&&/^1?n(?:\+[01]|-\d+)?$/.test(e)&&fe(u+n+a+" in ':not()'");return!0}(t=t.replace(/\s+/g,""),n,e)){switch(e){case"nth-child":o=_(e,t,f,r,!1);break;case"nth-last-child":o=_(e,t,h,r,!0);break;case"nth-of-type":r=ne(s,e),o=_(e,t,f,r,!1);break;case"nth-last-of-type":r=ne(s,e),o=_(e,t,h,r,!0);break;default:ue(u+e+"' is not implemented")}a&&s.add(a,!0),o&&s.add(o)}}function _(e,t,n,s,a){let r="";if(/^\d+$/.test(t)){r=M(n,s,{count:parseInt(t)-1,comparison:" = "})}else if("odd"===t)r=B(n,s," + 1",2,1);else if("even"===t)r=B(n,s," + 1",2,0);else{const e=function(e,t){const n=o.exec(e);if(null!==n){const e="-"===n[1],s=D(n[1],n[2],1),a=D(n[3],n[4],0),r=Math.abs(s);let o=a-1,i=t||0===r?" = ":e?" <= ":" >= ",c="none";return t&&(e?null==n[2]||r>=a?i=" <= ":(0!==r||a<2)&&(i=" < ",o++):0!==r&&(i=" >= ")),0===s?c="cnt":(e||1!==a)&&a>0?c=r>1?"both":"cnt":r>1&&(c="mod"),{valueA:r,valueB:a,count:o,comparison:i,type:c}}pe(0,"parseFnNotation",o,e)}(t,a);if(e.valueA){const t=function(e){const t=1-e;return 0===t?"":(t<0?" - ":" + ")+Math.abs(t)}(e.valueB);"mod"===e.type?r=B(n,s,t,e.valueA,0):"cnt"===e.type?r=M(n,s,e):"both"===e.type&&(r=M(n,s,e)+" and "+B(n,s,t,e.valueA,0))}else r=M(n,s,e)}return r}function B(e,t,n,s,a){return`(count(${e}${t})${n}) mod ${s} = ${a}`}function M(e,t,n){return 0===n.count&&/^<?=$/.test(n.comparison.trim())?F(e,t):`count(${e}${t})${n.comparison}${n.count}`}function F(e,t){return`not(${e}${t||"*"})`}function D(e,t,n){return null!=t?+((e&&"-"===e?"-":"")+t):n}function G(e){return e=e?K(e):"normalize-space()",g.translate?H(e):e}function H(e,t){const n="abcdefghjiklmnopqrstuvwxyz";return"translate("+e+", '"+n.toUpperCase()+(t?"":w)+"', '"+n+(t?"":x)+"')"}function J(e,t){return e||fe(u+t+"' has missing argument"),"normalize-space("+(e=K(e,t))+")"}function K(e,t){if((e=e.replace(/\\(?=.)/g,"")).includes("'")){if(!e.includes('"'))return'"'+e+'"';fe((t?u+t+"' string argument":"string")+" contains both '\"' and ''' quotes")}return"'"+e+"'"}function Q(e,t){const n=parseInt(e);if(Number.isInteger(n))return n;fe(u+t+(e?"' argument '"+e+"' is not an integer":"' has missing argument"))}function Y(e,t){s.lastIndex=e;const n=s.exec(N);if(null!==n){const s=n[0].replace("|",":").toLowerCase();return"*:"===t.owner?t.owner+=s:t.owner=s,e+n[0].length-1}pe(e,"parseTagName",s)}function ee(e){a.lastIndex=e;const t=a.exec(N);if(null!==t)return[e+t[0].length-1,t[0].replace(/^\\00003(?=\d+)/,"")];pe(e,"parseClassValue",a)}function te(e){r.lastIndex=e;const t=r.exec(N);if(null!==t){const n=t[1];if(null!=t[2]){const s=re(e+t[0].length-1,N,"lang"===n,"(",")");if(s)return[s.index,n,s.content]}return[e+t[0].length-1,n,""]}pe(e,"parsePseudoClass",r)}function ne(e,t){const n="node()"!==e.owner?e.owner:e.parentNode.parentNode.owner;return t&&"*"==n&&ue(u+t+"' is required an element name; '*' is not implemented."),n}function se(e){c.lastIndex=e;const t=c.exec(N);if(null!==t){const n=t[0].toLowerCase();return[e+t[0].length-1,n]}pe(e,"parseAttributeName",c)}function ae(e){l.lastIndex=e;const t=l.exec(N);if(null!==t){let n,s;return n=null!=t[1]?t[1]:null!=t[2]?t[2]:t[3],null!=t[4]&&(s=t[4].toLowerCase()),[e+t[0].length-1,n,s]}pe(e,"parseAttributeValue",l)}function re(e,t,n,s,a){let r=!0,o=e,i=0;for(;e<t.length;e++){const c=t[e];if(r)c===s&&(i++,o=e+1),r=!1;else if('"'===c||"'"===c){for(;++e<t.length&&t[e]!==c;);e>=t.length&&he(e,c,"function parseArgument()",t)}else if(c===s)i++;else if(c===a&&0==--i){const s=t.substring(o,e);return{index:e,content:n?s:oe(s)}}}return null}function oe(e){let t=e.length;if(t>1){const n=e[0],s=e[t-1];("'"===n&&"'"===s||'"'===n&&'"'===s)&&t>2&&(e=e.substr(1,t-2))}return e}function ie(e,t){return e+1<A&&N[e+1]===t}function ce(e){null!=e&&e.trim()||fe("argument is null or white space")}function le(e){g.consoleUse||m.includes(e)||(m+=e)}function de(e){"function"==typeof g.printError&&g.printError(e)}function ue(e){throw de(e),new n(N,y+1,e)}function fe(e){throw de(e),new n(N,"?",e)}function he(e,t,s,a){const r="Unexpected character '";throw de((g.debug?s+". ":"")+r+"<b>"+t+"</b>'\nposition <b>"+(e+1)+"</b>\nstring - '<b>"+a+"</b>'"),new n(a,e+1,s+r+t+"'")}function pe(e,t,s,a){const r=a||N.substr(e),o=" failed to match the string: ";let i="";i=g.debug?`function - <b>${t}()</b>\nRegExp${o}'<b>${r}</b>'\nRegExp - '<b>${s}</b>'`:`Error of ${t.replace(/\B([A-Z])/g,((e,t)=>" "+t.toLowerCase())).replace("parse","parsing")}\nString: '<b>${r}</b>'`,de(i);throw new n(N,e+1,`function ${t}() - RegExp '${s}'${o}'${r}'`)}export{z as default};
