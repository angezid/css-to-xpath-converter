/*!*******************************************
* css-to-xpath-converter 1.0.0
* https://github.com/angezid/css-to-xpath-converter
* MIT licensed
* Copyright (c) 2024â€“2025, angezid
*********************************************/
function e(t){this.axis="",this.separator="",this.owner="",this.isClone=!1,this.parentNode=t,this.previousNode,this.childNodes,this.content,this.addChild=function(e){this.childNodes||(this.childNodes=[]),this.childNodes.push(e)},this.add=function(){let e="";for(let t=0;t<arguments.length;t++)e+=arguments[t];this.content||(this.content=[]),this.content.push(e)},this.hasAxis=function(e){if(this.axis===e)return!0;if(this.childNodes)for(let t=0;t<this.childNodes.length;t++)if(this.childNodes[t].hasAxis(e))return!0;return!1},this.hasOr=function(){if(this.content&&this.content.some((e=>" or "===e||" | "===e)))return!0;if(this.childNodes)for(let e=0;e<this.childNodes.length;e++)if(this.childNodes[e].hasOr())return!0;return!1},this.clone=function(){const t=new e;return t.owner=this.owner,t.isClone=!0,t},this.toString=function(e=""){return this.isClone||(e=this.separator+this.axis+this.owner,this.content&&(e+=this.content.join(""))),this.childNodes&&this.childNodes.forEach((t=>{e+=t.toString(e)})),e}}function t(e,n,a,s,r){const o=new Error(a,s,r);return o.parser=!0,o.column=n,o.code=e,Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,t),o}t.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,Error):t.__proto__=Error;const n=/(?:[a-zA-Z]+\|)?(?:[a-zA-Z][^ -,.\/:-@[-^`{-~]*)|(?:[a-zA-Z]+\|*)/y,a=/(?:^\\00003\d+)?(?:\\[^ ]|[^\t-,.\/:-@[-^`{-~])+/y,s=/((?:[a-z]+-)*[a-z]+)(?:([(])|(?=[ ,:+>~!^]|$))/y,r=/^([+-])?([0-9]+)?n(?:([+-])([0-9]+))?$/,o=/(?:(?:\*|[a-zA-Z]+)\|)?(?:\*|[^ -,.\/:-@[-^`{-~]+)/y,i=/(?:[a-zA-Z]+\|)?[^ -,.\/:-@[-^`{-~]+(?=(?:[~^|$!*]?=)|\])/y,c=/(?:"([^"]*)"|'([^']*)'|((?:\\[^ ]|[^ "'\]])+))(?: +([siSI]))?(?=\])/y,l=Object.freeze({Text:0,PseudoClass:1,AttributeName:2,AttributeValue:3}),d="Pseudo-class ':",u="preceding-sibling::",h="following-sibling::",f="\nSystem.Xml.XPath.XPathNavigator doesn't support '*' as a namespace.";let p,b,g,m,k,w,x,N,$;function y(t,n){se(t),p=Object.assign({},{axis:".//",consoleUse:!1,standard:!1,removeXPathSpaces:!1,uppercaseLetters:"",lowercaseLetters:"",postprocess:!0,debug:!1},n),b="",g="",w=[];const a=new e;let s,r;try{m=p.uppercaseLetters?p.uppercaseLetters.trim():"",k=p.lowercaseLetters?p.lowercaseLetters.trim():"",m.length!==k.length&&ce("Custom upper and lower case letters have different length"),r=function(e){const t=",>+=~^!:([",n=",>+=~^!$]()";x=e,$=x.length;let a=!1,s=!1,r="\0";const o=[];for(let e=0;e<$;e++){const c=x[e];if(" "===c||/\s/.test(c)){if(s)continue;a&&(t.includes(r)?(a=!1,s=!1):s=!0)}else if("\\"===c)(e+1>=$||/\s/.test(x[e+1]))&&le(e,c,"Non-escape character",x),o.push(c,x[++e]);else if("/"===c&&ae(e,"*")){e+=2;const t=i(e,c,!0);-1===t?o.push("/*"):e=t}else if('"'===c||"'"===c){const t=i(e,c,!1);-1!==t?(o.push(x.substring(e,t+1)),e=t):le(e,c,"function normalizeWhiteSpaces()",x),a=!0,r=c}else!s||n.includes(c)||"*"===c&&ae(e,"=")||o.push(" "),o.push(c),a=!0,s=!1,r=c}function i(e,t,n){for(;++e<$;)if(x[e]===t){if(n&&"*"!==x[e-1])continue;return e}return-1}return o.join("")}(t),s=z(a,r,p.axis,null),s=function(e){p.postprocess&&(p.removeXPathSpaces&&(e=e.replace(/("[^"]+"|'[^']+')|([,<=>|+-]) +| +(?=[<=>|+-])/g,((e,t,n)=>t||n||""))),e=(e=(e=(e=e.replace(/([([]| or )self::node\(\)\[((?:[^'"[\]]|"[^"]*"|'[^']*')+)\](?!\[| *\|)/g,"$1$2")).replace(/((?:[^'"[\]]|"[^"]*"|'[^']*')+)|\]\[(?![[(])/g,((e,t)=>t||" and "))).replace(/\[\(((?:[^'"()]|"[^"]*"|'[^']*')+)\)]/g,((e,t)=>"["+t+"]"))).replace(/\/child::/g,"/"));return e=e.replace(/((?:[^'"{}]|"[^"]*"|'[^']*')+)|[{}]/g,((e,t)=>t||"")),e}(s)}catch(e){return e.parser?p.debug&&console.log(e.message,e.code,e.column):console.error(e),{xpath:s,css:r,warning:b,error:e.message}}return{xpath:s,css:r,warning:b,error:g}}function A(e,t,n,a,s){t||ce("':"+s.name+"()' has missing argument"),w.push(x);const r=z(e,t,n,a,s);return x=w.pop(),$=x.length,r}function z(e,t,n,s,r){se(t);let o=S(e,null),i=S(o,null);const c=r?r.name:"",d=r&&r.predicate,p="not"===c;let b,g=null,m=null,k=null,w=null,y=l.Text,A=!1,z=!0,T=-1,q=x[0];for(x=t,$=x.length,(/^[,(]/.test(x)||!c&&/^[>+~^!]/.test(q))&&X(),/[.#[:>+~^!]$/.test(x)&&(q=x[$-1],X($));++T<$;)if(N=T,q=x[T],y===l.Text){switch((A&&!/[>+~^!.#*:|[@a-zA-Z]/.test(q)||!A&&!/[ ,>+~^!.#*:|[@a-zA-Z]/.test(q))&&le(T,q,v(y)+", check="+A,x),r&&/!?[+~]/.test(q)&&c.endsWith("-sibling")&&ce("'"+c+"()' with these arguments has no implementation"),(/[.#:[]/.test(q)||"has"!==c&&i.previousNode&&/[>+~^!]/.test(q))&&(O(n,i,r),P(s,i)),q){case".":let t="[";do{if([T,b]=K(T+1),t+=Z("@class",G(" "+b+" ")),a.lastIndex=T+2,!ae(T,".")||!a.test(x))break;t+=" and "}while(++T<$);i.add(t+"]"),A=!1;break;case"#":[T,b]=K(T+1),i.add("[@id=",G(b),"]"),A=!1;break;case">":i=p?C(o,i,"parent::"):S(o,i,"child::","/"),A=!0;break;case"+":i=E(o,i,p?u:h,"*","{[1]}"),A=!0;break;case"~":i=p?C(o,i,u):S(o,i,h,"/"),A=!0;break;case"^":i=p?C(o,i,"parent::",_(u)):E(o,i,"child::","*","[1]"),A=!0;break;case"!":ae(T,"^")?(i=p?C(o,i,"parent::",_(h)):E(o,i,"child::","*","[last()]"),T++):ae(T,"+")?(i=p?E(o,i,h,"*","{[1]}"):E(o,i,u,"*","[1]"),T++):ae(T,">")?(i=p?C(o,i,"child::"):S(o,i,"parent::","/"),T++):ae(T,"~")?(i=p?C(o,i,h):S(o,i,u,"/"),T++):i=p?C(o,i,"descendant-or-self::"):S(o,i,"ancestor-or-self::","/"),A=!0;break;case"[":g="",m=null,k=null,w=null,y=l.AttributeName;break;case":":ae(T,":")&&X(1),y=l.PseudoClass;break;case",":T+1>=$&&X(),o=S(e,o),o.add(d?" or ":" | "),o=S(e,o),i=S(o,null,r?"":n),A=!0;break;case"@":[T,i]=I(T,n,r,o,i),A=!1;break;case"*":O(n,i,r),i.owner="*",A=!1;break;case" ":r?"has-ancestor"===c?i=S(o,i,"ancestor::"," and "):["has-parent","before","after"].includes(c)||c.endsWith("-sibling")?(i.previousNode||(i.axis="ancestor::",i.separator=""),i=S(o,i,"ancestor::"," and ")):"not"===c&&"self::"===i.axis?(i.previousNode&&"ancestor::"===i.previousNode.axis&&(i.separator=" and "),i.and=!0,i=C(o,i,"ancestor::")):i=S(o,i,null,"//"):i=S(o,i,null,"//"),A=!0;break;case"|":ae(T,"|")?X(1):[T,i]=j(T,n,z,o,i),A=!1;break;case"\\":T++;break;default:/[a-zA-Z]/.test(q)?(i.owner&&X(),O(n,i,r),T=J(T,i)):X(),A=!1}z=!1}else if(y===l.AttributeName)switch(q){case"=":w="=",m=null,y=l.AttributeValue;break;case"!":case"~":case"^":case"$":case"*":case"|":ae(T,"=")?(w=q+"=",T++,m=null,y=l.AttributeValue):"*"===q&&ae(T,"|")?(g="*:",T++,re(f)):X();break;case"]":g||ie("attrName is null or empty.'"),i.add("[@"+g+"]"),y=l.Text,A=!1;break;case" ":break;default:[T,b]=ee(T),g+=b}else if(y===l.AttributeValue)switch(q){case"]":null===m&&ie("attrValue is null."),L(g,m,w,k,i),y=l.Text,A=!1;break;case"=":X();break;case" ":break;default:m&&ie("attrValue '"+m+"' is already parse: "+x.substring(T)),[T,m,k]=te(T)}else if(y===l.PseudoClass){let e="",t="";[T,e,t]=Q(T),"root"===e?(i.owner=i.separator="",i.axis="//",i=S(o,i,"ancestor-or-self::"),i.owner="*",i.add("[last()]")):(P(s,i),e.startsWith("nth-")?R(e,t,r,i):V(e,t,p,i)),y=l.Text,A=!1}let U=e.toString();function X(e){le(T+(e||0),q,v(y),x)}return(A||y!==l.Text)&&ie("Something is wrong: '"+v(y)+"', selector='"+x+"', xpath='"+U+"'"),U}function v(e){return"State."+Object.keys(l)[e]}function S(t,n,a,s){const r=new e(t);return t.addChild(r),r.previousNode=n,r.axis=a||"",s&&n.owner&&(r.separator=s),r}function C(e,t,n,a){"node()"===t.owner&&(t.owner="*"),t.axis=n;var s=S(e,t,"self::","/");return a&&s.add(a),s}function E(e,t,n,a,s){const r=S(e,t,n,"/");return r.owner=a,r.add(s),S(e,r,"self::","/")}function O(e,t,n){if(!e||t.axis||"self::"===e&&!n)return;const a=t.parentNode.toString().trim(),s=a.length;if(0==s||/ (?:or|\|)$/.test(a))t.axis=e;else{const n=a[s-1];":"!=n&&"|"!=n||(t.axis=e)}}function P(e,t){if(t.owner)return;let n="";if(t.previousNode){const a=t.parentNode.toString().trim();if(a.length)if(/(?: or|\|)$/.test(a))n=e||"*";else{const t=a[a.length-1];e?":"===t?n="*":"/"===t&&(n=e):":"!==t&&"/"!==t||(n="*")}}else n=e||"*";t.owner=n}function j(e,t,n,a,s){if("*"==s.owner)ae(e,"*")?(s.owner="*:*",e++):s.owner="*:",re(f);else if(n&&O(t,s),ae(e,"*"))s.owner?s.owner+=":*":(s.owner="*",s.add("[not(contains(name(), ':'))]")),e++;else{if(e+1<$&&/[a-zA-Z]/.test(x[e+1])){let t=S(a,s,"self::","/");return t.owner="*",[e,t]}s.owner="*:",re(f)}return[e,s]}function I(e,t,n,a,s){const r=s.parentNode.toString().trim();if(0===r.length)n&&(t="");else if(/ (?:or|\|)$/.test(r))t="";else{const e=r[r.length-1];t=":"!==e&&"/"!==e?"/":""}o.lastIndex=e+1;const i=o.exec(x);if(null!==i){const n=S(a,s,t);return n.add("@",i[0].replace("|",":").toLowerCase()),[e+i[0].length,n]}de(e,"parseAttribute",o)}function L(e,t,n,a,s){if(!t.trim())return void("="===n?s.add("[@",e," = '']"):"!="===n?s.add("{[not(@",e,") or @",e," != '']}"):"|="===n?s.add("{[@",e," = '' or starts-with(@",e,", '-')]}"):s.add("[false()]"));const r="i"===a||"lang"===e||"type"===e&&"input"==Y(s);if(!p.standard&&"class"===e)return void function(e,t,n,a){const s=n?F("@class"):"@class";let r=e.trim();switch(t){case"=":case"~=":case"!=":r=" "+r+" ";break;case"^=":r=" "+r;break;case"$=":r+=" "}r=n?M(r):G(r);if("!="===t)a.add("{[not(",s,") or not(",Z(s,r),")]}");else if("*="===t)a.add("[contains(",s,", ",r,")]");else if("|="===t){const t=n?M(" "+e+" "):G(" "+e+" "),r=n?M(" "+e+"-"):G(" "+e+"-");a.add("{[",Z(s,t)," or ",Z(s,r),"]}")}else a.add("[",Z(s,r),"]")}(t,n,r,s);const o=r?F("@"+e):null,i=G(t);switch(n){case"=":r?s.add("[",o," = ",M(t),"]"):s.add("[@",e,"=",i,"]");break;case"!=":r?s.add("{[not(@",e,") or ",o,"!=",M(t),"]}"):s.add("{[not(@",e,") or @",e,"!=",i,"]}");break;case"~=":r?s.add("[contains(concat(' ', normalize-space(",o,"), ' '), concat(' ', normalize-space(",M(t),"), ' '))]"):s.add("[contains(concat(' ', normalize-space(@",e,"), ' '), concat(' ', normalize-space(",i,"), ' '))]");break;case"|=":r?s.add("{[",o," = ",M(t)," or starts-with(",o,", concat(",M(t),", '-'))]}"):s.add("{[@",e," = ",i," or starts-with(@",e,", ",G(t+"-"),")]}");break;case"^=":r?s.add("[starts-with(",o,", ",M(t),")]"):s.add("[starts-with(@",e,", ",i,")]");break;case"$=":r?s.add(T(o,"@"+e,i,M(t))):s.add(T("@"+e,"@"+e,i,i));break;case"*=":r?s.add("[contains(",o,", ",M(t),")]"):s.add("[contains(@",e,", ",i,")]")}}function T(e,t,n,a){return"[substring("+e+", string-length("+t+") - (string-length("+n+") - 1)) = "+a+"]"}function Z(e,t){return`contains(concat(' ', normalize-space(${e}), ' '), ${t})`}function V(e,t,n,a){let s,r,o,i,c="",l="local-name()";switch(e){case"any-link":a.add("[(",l," = 'a' or ",l," = 'area') and @href]");break;case"external":a.add("{[(",l," = 'a' or ",l," = 'area') and (starts-with(@href, 'https://') or starts-with(@href, 'http://'))]}");break;case"contains":a.add("[contains(normalize-space(), ",D(t,e),")]");break;case"icontains":a.add("[contains(",M(),", ",F(D(t,e)),")]");break;case"empty":a.add("[not(*) and not(text())]");break;case"dir":i=G(t),a.add("[",/ltr/.test(i)?"not(ancestor-or-self::*[@dir]) or ":"","ancestor-or-self::*[@dir]{[1]}[@dir = ",i,"]]");break;case"first-child":a.add(_(u));break;case"first":n?a.add(t?b(u," <= "):_(u)):a.add(t?"[position() <= "+H(t,e)+"]":"[1]");break;case"first-of-type":o=Y(a,e),a.add(_(u,o));break;case"gt":case"skip":n?a.add(b(u," > ")):a.add("[position() > ",H(t,e),"]");break;case"lt":n?a.add(b(u," <= ")):a.add("[position() < ",H(t,e),"]");break;case"eq":case"nth":n?a.add(b(u," = ")):a.add("[",H(t,e),"]");break;case"last-child":a.add(_(h));break;case"only-child":a.add("[not(",u,"*) and not(",h,"*)]");break;case"only-of-type":o=Y(a,e),a.add("[not(",u,o,") and not(",h,o,")]");break;case"text":a.add("[@type='text']");break;case"starts-with":a.add("[starts-with(normalize-space(), ",D(t,e),")]");break;case"istarts-with":a.add("[starts-with(",M(),", ",F(D(t,e)),")]");break;case"ends-with":c=D(t,e),a.add(T("normalize-space()","normalize-space()",c,c));break;case"iends-with":c=D(t,e),a.add(T(M(),"normalize-space()",c,F(c)));break;case"is":case"matches":s=a.clone(),r=A(s,t,"self::","node()",{predicate:!0,name:e}),p(s,"["+r+"]");break;case"not":s=a.clone(),r=A(s,t,"self::","node()",{name:e}),"self::node()"!==r&&(r=function(e){let t="";return e.childNodes.forEach((e=>{if(e.childNodes){let n="",a="",s=!1;for(let t=e.childNodes.length-1;t>=0;t--){const r=e.childNodes[t];s?(r.separator="",n+="{["+r.toString(),a+="]}"):(r.separator&&(s=!0,r.separator=""),n+=r.toString())}t+=n+a}else t+=e.toString()})),t}(s),p(s,"[not("+r+")]"));break;case"has":s=a.clone(),r=A(s,t,".//",null,{name:e}),p(s,"["+r+"]");break;case"has-sibling":s=a.clone();let g=A(s,t,u,null,{name:e});s.hasAxis("ancestor::")&&(g=q(s,u)),s=a.clone();let m=A(s,t,h,null,{name:e});s.hasAxis("ancestor::")&&(m=q(s,h)),a.add("{[(",g,") or (",m,")]}");break;case"has-parent":f("parent::");break;case"has-ancestor":s=a.clone(),r=A(s,t,"ancestor::",null,{name:e}),p(s,"["+r+"]");break;case"after":f("preceding::");break;case"after-sibling":f(u);break;case"before":f("following::");break;case"before-sibling":f(h);break;case"last":n?a.add(t?b(h," <= "):_(h)):a.add(t?"[position() > last() - "+H(t,e)+"]":"[last()]");break;case"last-of-type":o=Y(a,e),a.add(_(h,o));break;case"skip-first":n?a.add(t?b(u," > "):_(u)):a.add("[position() > ",t?H(t,e):"1","]");break;case"skip-last":n?a.add(t?b(h," > "):_(h)):a.add("[position() < last()",t?" - "+(H(t,e)-1):"","]");break;case"limit":n?a.add(b(u," <= ")):a.add("[position() <= ",H(t,e),"]");break;case"lang":c=F("@lang"),i=M(t),a.add("[ancestor-or-self::*[@lang]{[1]}[",c," = ",i," or starts-with(",c,", concat(",i,", '-'))","]]");break;case"range":const k=t.split(",");2!==k.length&&ce(d+e+"(,)' is required two numbers");const w=H(k[0],e),x=H(k[1],e);w>=x&&ce(d+e+"("+w+", "+x+")' have wrong arguments"),n?(c=W(u,"*",{count:w-1,comparison:" >= "}),c+=W(u,"*",{count:x-1,comparison:" <= "}),a.add(c.replace("]["," and "))):a.add("[position() >= ",w," and position() <= ",x,"]");break;case"target":a.add("[starts-with(@href, '#')]");break;case"disabled":a.add("[@disabled]");break;case"enabled":a.add("[not(@disabled)]");break;case"selected":a.add("[",l," = 'option' and @selected]");break;case"checked":a.add("[(",l," = 'input' and (@type='checkbox' or @type='radio') or ",l," = 'option') and @checked]");break;case"read-only":case"read-write":a.add("[@",e.replace("-",""),"]");break;default:ie(d+e+"' is not implemented")}function f(n){const s=a.clone();let r=A(s,t,n,null,{name:e});s.hasAxis("ancestor::")&&(r=q(s,n)),p(s,"["+r+"]")}function p(e,t){a.add(e.hasOr()?"{"+t+"}":t)}function b(n,a){return W(n,"*",{count:H(t,e)-1,comparison:a})}}function q(e,t){let n="";return e.childNodes.forEach((e=>{if(e.hasAxis("ancestor::")){let a="";const s=e.childNodes.length-1;e.childNodes.forEach(((e,n)=>{n<s?a+=e.toString():(e.axis=t,e.separator="",a=e.toString()+"["+a+"]")})),n+=a}else n+=e.toString()})),n}function R(e,t,n,a){se(t);let s,r="*",o="";if("nth-child"===e||"nth-last-child"===e){const n=function(e,t,n){let a,s="*";const r=/ +of +(.+)$/,o=r.exec(t);if(null!==o){const i=n.clone();if(a=A(i,o[1],null,"self::node()",{predicate:!0,name:e}),1===i.childNodes.length){const e=i.childNodes[0],t=e.childNodes[0],n="self::node()"===t.owner;t.owner="";const r="{"+e.toString()+"}";n?(s+=r,a=r):(s="{"+a+"}",a=r)}else a="{["+a+"]}",s+=a;return{arg:t.replace(r,""),owner:s,ofResult:a}}return null}(e,t,a);n&&(t=n.arg,r=n.owner,s=n.ofResult)}if(function(e,t,n){const a=t&&"not"===t.name,s="' with these arguments yield no matches";if(/^(?:-?0n?|-n(?:[+-]0|-\d+)?|(?:0|-\d+)n(?:-\d+)?|(?:0|-\d+)n\+0)$/.test(e)){if(a)return!1;ce(d+n+s)}a&&/^1?n(?:\+[01]|-\d+)?$/.test(e)&&ce(d+n+s+" in ':not()'");return!0}(t=t.replace(/\s+/g,""),n,e)){switch(e){case"nth-child":o=U(e,t,u,r,!1);break;case"nth-last-child":o=U(e,t,h,r,!0);break;case"nth-of-type":r=Y(a,e),o=U(e,t,u,r,!1);break;case"nth-last-of-type":r=Y(a,e),o=U(e,t,h,r,!0);break;default:ie(d+e+"' is not implemented")}s&&a.add(s),a.add(o)}}function U(e,t,n,a,s){let o="";if(/^\d+$/.test(t)){o=W(n,a,{count:parseInt(t)-1,comparison:" = "})}else if("odd"===t)o=X(n,a," + 1",2,1);else if("even"===t)o=X(n,a," + 1",2,0);else{const e=function(e,t){const n=r.exec(e);if(null!==n){const e="-"===n[1],a=B(n[1],n[2],1),s=B(n[3],n[4],0),r=Math.abs(a);let o=s-1,i=t||0===r?" = ":e?" <= ":" >= ",c="none";return t&&(e?null==n[2]||r>=s?i=" <= ":(0!==r||s<2)&&(i=" < ",o++):0!==r&&(i=" >= ")),0===a?c="cnt":(e||1!==s)&&s>0?c=r>1?"both":"cnt":r>1&&(c="mod"),{valueA:r,valueB:s,count:o,comparison:i,type:c}}de(0,"parseFnNotation",r,e)}(t,s);if(e.valueA){const t=function(e){const t=1-e;return 0===t?"":(t<0?" - ":" + ")+Math.abs(t)}(e.valueB);"mod"===e.type?o=X(n,a,t,e.valueA,0):"cnt"===e.type?o=W(n,a,e):"both"===e.type&&(o=W(n,a,e)+X(n,a,t,e.valueA,0),o=o.replace("]["," and "))}else o=W(n,a,e)}return o}function X(e,t,n,a,s){return`[(count(${e}${t})${n}) mod ${a} = ${s}]`}function W(e,t,n){return 0===n.count&&/^<?=$/.test(n.comparison.trim())?_(e,t):`[count(${e}${t})${n.comparison}${n.count}]`}function _(e,t){return`[not(${e}${t||"*"})]`}function B(e,t,n){return null!=t?+((e&&"-"===e?"-":"")+t):n}function M(e){return F(e=e?G(e):"normalize-space()")}function F(e){const t="abcdefghjiklmnopqrstuvwxyz";return"translate("+e+", '"+t.toUpperCase()+m+"', '"+t+k+"')"}function D(e,t){return e||ce(d+t+"' has missing argument"),"normalize-space("+(e=G(e,t))+")"}function G(e,t){if((e=e.replace(/\\(?=.)/g,"")).includes("'")){if(!e.includes('"'))return'"'+e+'"';ce((t?d+t+"' string argument":"string")+" contains both '\"' and ''' quotes")}return"'"+e+"'"}function H(e,t){const n=parseInt(e);if(Number.isInteger(n))return n;ce(d+t+(e?"' argument '"+e+"' is not an integer":"' has missing argument"))}function J(e,t){n.lastIndex=e;const a=n.exec(x);if(null!==a){const n=a[0].replace("|",":").toLowerCase();return"*:"===t.owner?t.owner+=n:t.owner=n,e+a[0].length-1}de(e,"parseTagName",n)}function K(e){a.lastIndex=e;const t=a.exec(x);if(null!==t)return[e+t[0].length-1,t[0].replace(/^\\00003(?=\d+)/,"")];de(e,"parseClassValue",a)}function Q(e){s.lastIndex=e;const t=s.exec(x);if(null!==t){const n=t[1];if(null!=t[2]){const a=function(e,t,n,a){let s=!0,r=e,o=0;for(;e<t.length;e++){const i=t[e];if(s)i===n&&(o++,r=e+1),s=!1;else if('"'===i||"'"===i){for(;++e<t.length&&t[e]!==i;);e>=t.length&&le(e,i,"function getArgument()",t)}else if(i===n)o++;else if(i===a&&0==--o)return{index:e,content:ne(t.substring(r,e))}}return null}(e+t[0].length-1,x,"(",")");if(a)return[a.index,n,a.content]}return[e+t[0].length-1,n,""]}de(e,"parsePseudoClass",s)}function Y(e,t){const n="node()"!==e.owner?e.owner:e.parentNode.parentNode.owner;return t&&"*"==n&&ie(d+t+"' is required an element name; '*' is not implemented."),n}function ee(e){i.lastIndex=e;const t=i.exec(x);if(null!==t){const n=t[0].toLowerCase();return[e+t[0].length-1,n]}de(e,"parseAttributeName",i)}function te(e){c.lastIndex=e;const t=c.exec(x);if(null!==t){let n,a;return n=null!=t[1]?t[1]:null!=t[2]?t[2]:t[3],null!=t[4]&&(a=t[4].toLowerCase()),[e+t[0].length-1,n,a]}de(e,"parseAttributeValue",c)}function ne(e){let t=e.length;if(t>1){const n=e[0],a=e[t-1];("'"===n&&"'"===a||'"'===n&&'"'===a)&&t>2&&(e=e.substr(1,t-2))}return e}function ae(e,t){return e+1<$&&x[e+1]===t}function se(e){null!=e&&e.trim()||ce("argument is null or white space")}function re(e){p.consoleUse||b.includes(e)||(b+=e)}function oe(e){"function"==typeof p.printError&&p.printError(e)}function ie(e){throw oe(e),new t(x,N+1,e)}function ce(e){throw oe(e),new t(x,"?",e)}function le(e,n,a,s){throw oe(a+". Unexpected character '<b>"+n+"</b>'\nposition <b>"+(e+1)+"</b>\nstring - '<b>"+s+"</b>'"),new t(s,e+1,a=a+". Unexpected character '"+n+"'")}function de(e,n,a,s){const r=s||x.substring(e),o=" failed to match the string: ";let i="";i=p.debug?`function - <b>${n}()</b>\nRegExp${o}'<b>${r}</b>'\nRegExp - '<b>${a}</b>'`:`Error of ${n.replace(/\B([A-Z])/g,((e,t)=>" "+t.toLowerCase())).replace("parse","parsing")}\nString: '<b>${r}</b>'`,oe(i);throw new t(x,e+1,`function ${n}() - RegExp '${a}'${o}'${r}'`)}export{y as default};
