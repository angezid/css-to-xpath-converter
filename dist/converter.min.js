/*!*******************************************
* css-to-xpath-converter 1.0.0
* https://github.com/angezid/css-to-xpath-converter
* MIT licensed
* Copyright (c) 2024â€“2025, angezid
*********************************************/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).toXPath=t()}(this,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(null,arguments)}function n(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw a}}return o}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){this.axis="",this.separator="",this.owner="",this.isClone=!1,this.parentNode=e,this.previousNode,this.childNodes,this.content,this.addChild=function(e){this.childNodes||(this.childNodes=[]),this.childNodes.push(e)},this.add=function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t];this.content||(this.content=[]),this.content.push(e)},this.hasAxis=function(e){if(this.axis===e)return!0;if(this.childNodes)for(var t=0;t<this.childNodes.length;t++)if(this.childNodes[t].hasAxis(e))return!0;return!1},this.hasOr=function(){if(this.content&&this.content.some((function(e){return" or "===e||" | "===e})))return!0;if(this.childNodes)for(var e=0;e<this.childNodes.length;e++)if(this.childNodes[e].hasOr())return!0;return!1},this.clone=function(){var e=new r;return e.owner=this.owner,e.isClone=!0,e},this.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.isClone||(e=this.separator+this.axis+this.owner,this.content&&(e+=this.content.join(""))),this.childNodes&&this.childNodes.forEach((function(t){e+=t.toString(e)})),e}}function a(e,t,n,r,s){var i=new Error(n,r,s);return i.parser=!0,i.column=t,i.code=e,Object.setPrototypeOf(i,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(i,a),i}a.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(a,Error):a.__proto__=Error;var s,i,o,c,l,u,d,f,h,p=new RegExp("(?:[a-zA-Z]+\\|)?(?:[a-zA-Z][^ -,.\\/:-@[-^`{-~]*)|(?:[a-zA-Z]+\\|*)","y"),g=new RegExp("(?:^\\\\00003\\d+)?(?:\\\\[^ ]|[^\\t-,.\\/:-@[-^`{-~])+","y"),b=new RegExp("((?:[a-z]+-)*[a-z]+)(?:([(])|(?=[ ,:+>~!^]|$))","y"),v=/^([+-])?([0-9]+)?n(?:([+-])([0-9]+))?$/,m=new RegExp("(?:(?:\\*|[a-zA-Z]+)\\|)?(?:\\*|[^ -,.\\/:-@[-^`{-~]+)","y"),w=new RegExp("(?:[a-zA-Z]+\\|)?[^ -,.\\/:-@[-^`{-~]+(?=(?:[~^|$!*]?=)|\\])","y"),k=new RegExp("(?:\"([^\"]*)\"|'([^']*)'|((?:\\\\[^ ]|[^ \"'\\]])+))(?: +([siSI]))?(?=\\])","y"),x=Object.freeze({Text:0,PseudoClass:1,AttributeName:2,AttributeValue:3}),y="Pseudo-class ':",N="\nSystem.Xml.XPath.XPathNavigator doesn't support '*' as a namespace.";function A(e,t,n,r,a){t||se("The pseudo-selector ':"+a.name+"()' have missing argument."),u.push(d);var s=z(e,t,n,r,a);return d=u.pop(),h=d.length,s}function z(e,t,r,a,s){t||se("selector is empty or white space");var i,o,c=E(e,null),l=E(c,null),u=s?s.name:"",p=s&&s.predicate,b=null,v=null,m=null,w=null,k=x.Text,y=!1,A=!0,z=-1;for(h=(d=t).length,/^[,(]/.test(d)&&ie(0,d[0],"State.Text",d);++z<h;)if(f=z,o=d[z],k===x.Text){switch((y&&!/[>+~^!.#*:|[@a-zA-Z]/.test(o)||!y&&!/[ >+~^!,.#*:|[@a-zA-Z]/.test(o))&&ie(z,o,S(k)+", check="+y,d),s&&/!?[+~]/.test(o)&&u.endsWith("-sibling")&&se("'"+u+"()' with these arguments has no implementation"),(/[.#:[]/.test(o)||"has"!==u&&l.previousNode&&/[>+~^!]/.test(o))&&($(r,l),j(a,l)),o){case".":var L="[";do{var V=n(G(z+1),2);if(z=V[0],L+=I("@class",_(" "+(i=V[1])+" ")),g.lastIndex=z+2,!ee(z,".")||!g.test(d))break;L+=" and "}while(++z<h);l.add(L+"]"),y=!1;break;case"#":var X=n(G(z+1),2);z=X[0],i=X[1],l.add("[@id=",_(i),"]"),y=!1;break;case">":l=E(c,l,"child::","/"),y=!0;break;case"+":l=O(c,l,"following-sibling::","*","[1]","self::"),y=!0;break;case"~":l=E(c,l,"following-sibling::","/"),y=!0;break;case"^":l=O(c,l,"child::","*","[1]","self::"),y=!0;break;case"!":ee(z,"^")?(l=O(c,l,"child::","*","[last()]","self::"),z++):ee(z,"+")?(l=O(c,l,"preceding-sibling::","*","[1]","self::"),z++):ee(z,">")?(l=E(c,l,"parent::","/"),z++):ee(z,"~")?(l=E(c,l,"preceding-sibling::","/"),z++):l=E(c,l,"ancestor-or-self::","/"),y=!0;break;case"[":b="",v=null,m=null,w=null,k=x.AttributeName;break;case":":ee(z,":")&&z++,k=x.PseudoClass;break;case",":z+1>=h&&ie(z,o,S(k),d),(c=E(e,c)).add(p?" or ":" | "),c=E(e,c),l=E(c,null,s?"":r),y=!0;break;case"@":var U=n(P(z,r,s,c,l),2);z=U[0],l=U[1],y=!1;break;case"*":$(r,l,s),l.owner="*",y=!1;break;case" ":s?"has-ancestor"===u?l=E(c,l,"ancestor::"," and "):"has-parent"===u||"before"===u||"after"===u||u.endsWith("-sibling")?(l.previousNode||(l.axis="ancestor::",l.separator=""),l=E(c,l,"ancestor::"," and ")):"not"===u&&"self::"===l.axis?(l.previousNode&&"ancestor::"===l.previousNode.axis&&(l.separator=" and "),l.axis="ancestor::",l=E(c,l,"self::","//")):l=E(c,l,null,"//"):l=E(c,l,null,"//"),y=!0;break;case"|":if(ee(z,"|"))ie(z+1,o,S(k),d);else{var q=n(C(z,r,A,c,l),2);z=q[0],l=q[1]}y=!1;break;case"\\":z++;break;default:/[a-zA-Z]/.test(o)?(l.owner&&ie(z,o,S(k),d),$(r,l,s),z=D(z,l)):ie(z,o,S(k),d),y=!1}A=!1}else if(k===x.AttributeName)switch(o){case"=":w="=",v=null,k=x.AttributeValue;break;case"!":case"~":case"^":case"$":case"*":case"|":ee(z,"=")?(w=o+"=",z++,v=null,k=x.AttributeValue):"*"===o&&ee(z,"|")?(b="*:",z++,ne(N)):ie(z,o,S(k),d);break;case"]":b||ae("attrName is null or empty.'"),l.add("[@"+b+"]"),k=x.Text,y=!1;break;case" ":break;default:var B=n(K(z),2);z=B[0],b+=i=B[1]}else if(k===x.AttributeValue)switch(o){case"]":null===v&&ae("attrValue is null."),T(b,v,w,m,l),k=x.Text,y=!1;break;case"=":ie(z,o,S(k),d);break;case" ":break;default:v&&ae("attrValue '"+v+"' is already parse: "+d.substring(z));var W=n(Q(z),3);z=W[0],v=W[1],m=W[2]}else if(k===x.PseudoClass){var M,F="",J=n(H(z),3);if(z=J[0],F=J[1],M=J[2],"root"===F)l.owner=l.separator="",l.axis="//",(l=E(c,l,"ancestor-or-self::")).owner="*",l.add("[last()]");else if(j(a,l),F.startsWith("nth-"))l=Z(F,M,s&&"not"===s.name,c,l);else R(F,M,l);k=x.Text,y=!1}var Y=e.toString();return y&&/(?:\/|::)$/.test(Y)?Y+"*":((y||k!==x.Text)&&ae("Something is wrong: '"+S(k)+"' xpath='"+Y+"' in: "+d),Y)}function S(e){return"State."+Object.keys(x)[e]}function E(e,t,n,a){var s=new r(e);return e.addChild(s),s.previousNode=t,s.axis=n||"",a&&t.owner&&(s.separator=a),s}function O(e,t,n,r,a,s){var i=E(e,t,n,"/");return i.owner=r,i.add(a),E(e,i,s,"/")}function $(e,t,n){if(e&&!t.axis&&("self::"!==e||n)){var r=t.parentNode.toString().trim(),a=r.length;if(0==a||/ (?:or|\|)$/.test(r))t.axis=e;else{var s=r[a-1];":"!=s&&"|"!=s||(t.axis=e)}}}function j(e,t){if(!t.owner){var n="";if(t.previousNode){var r=t.parentNode.toString().trim();if(r.length)if(/(?: or|\|)$/.test(r))n=e||"*";else{var a=r[r.length-1];e?":"===a?n="*":"/"===a&&(n=e):":"!==a&&"/"!==a||(n="*")}}else n=e||"*";t.owner=n}}function C(e,t,n,r,a){if("*"==a.owner)ee(e,"*")?(a.owner="*:*",e++):a.owner="*:",ne(N);else if(n&&$(t,a),ee(e,"*"))a.owner?a.owner+=":*":(a.owner="*",a.add("[not(contains(name(), ':'))]")),e++;else{if(e+1<h&&/[a-zA-Z]/.test(d[e+1])){var s=E(r,a,"self::","/");return s.owner="*",[e,s]}a.owner="*:",ne(N)}return[e,a]}function P(e,t,n,r,a){var s=a.parentNode.toString().trim();if(0===s.length)n&&(t="");else if(/ (?:or|\|)$/.test(s))t="";else{var i=s[s.length-1];t=":"!==i&&"/"!==i?"/":""}m.lastIndex=e+1;var o=m.exec(d);if(null!==o){var c=E(r,a,t);return c.add("@",o[0].replace("|",":").toLowerCase()),[e+o[0].length,c]}oe(e,"parseAttribute",m)}function T(e,t,n,r,a){if(t.trim()){var i="i"===r||"lang"===e||"type"===e&&"input"==J(a);if(s.standard||"class"!==e){var o=i?W("@"+e):null,c=_(t);switch(n){case"=":i?a.add("[",o," = ",B(t),"]"):a.add("[@",e,"=",c,"]");break;case"!=":i?a.add("{[not(@",e,") or ",o,"!=",B(t),"]}"):a.add("{[not(@",e,") or @",e,"!=",c,"]}");break;case"~=":i?a.add("[contains(concat(' ', normalize-space(",o,"), ' '), concat(' ', normalize-space(",B(t),"), ' '))]"):a.add("[contains(concat(' ', normalize-space(@",e,"), ' '), concat(' ', normalize-space(",c,"), ' '))]");break;case"|=":i?a.add("{[",o," = ",B(t)," or starts-with(",o,", concat(",B(t),", '-'))]}"):a.add("{[@",e," = ",c," or starts-with(@",e,", ",_(t+"-"),")]}");break;case"^=":i?a.add("[starts-with(",o,", ",B(t),")]"):a.add("[starts-with(@",e,", ",c,")]");break;case"$=":i?a.add("[substring(",o,", string-length(@",e,") - (string-length(",c,") - 1)) = ",B(t),"]"):a.add("[substring(@",e,", string-length(@",e,") - (string-length(",c,") - 1)) = ",c,"]");break;case"*=":i?a.add("[contains(",o,", ",B(t),")]"):a.add("[contains(@",e,", ",c,")]")}}else!function(e,t,n,r){var a=n?W("@class"):"@class",s=e.trim();switch(t){case"=":case"~=":case"!=":s=" "+s+" ";break;case"^=":s=" "+s;break;case"$=":s+=" "}s=n?B(s):_(s);if("!="===t)r.add("{[not(",a,") or not(",I(a,s),")]}");else if("*="===t)r.add("[contains(",a,", ",s,")]");else if("|="===t){var i=n?B(" "+e+" "):_(" "+e+" "),o=n?B(" "+e+"-"):_(" "+e+"-");r.add("{[",I(a,i)," or ",I(a,o),"]}")}else r.add("[",I(a,s),"]")}(t,n,i,a)}else"="===n?a.add("[@",e," = '']"):"!="===n?a.add("{[not(@",e,") or @",e," != '']}"):"|="===n?a.add("{[@",e," = '' or starts-with(@",e,", '-')]}"):a.add("[false()]")}function I(e,t){return"contains(concat(' ', normalize-space(".concat(e,"), ' '), ").concat(t,")")}function R(e,t,n){var r,a,s,i,o="",c="local-name()";switch(e){case"any-link":n.add("[(",c," = 'a' or ",c," = 'area') and @href]");break;case"external":n.add("{[(",c," = 'a' or ",c," = 'area') and (starts-with(@href, 'https://') or starts-with(@href, 'http://'))]}");break;case"contains":n.add("[contains(normalize-space(), ",M(t,e),")]");break;case"icontains":n.add("[contains(",B(),", ",W(M(t,e)),")]");break;case"empty":o="[not(*) and not(text())]";break;case"first-child":o="[not(preceding-sibling::*)]";break;case"first":o=t?"[position() <= "+F(t,e)+"]":"[1]";break;case"first-of-type":s=J(n,e),n.add("[not(preceding-sibling::",s,")]");break;case"gt":case"skip":n.add("[position() > ",F(t,e),"]");break;case"lt":n.add("[position() < ",F(t,e),"]");break;case"eq":case"nth":n.add("[",F(t,e),"]");break;case"last-child":o="[not(following-sibling::*)]";break;case"only-child":o="[not(preceding-sibling::*) and not(following-sibling::*)]";break;case"only-of-type":s=J(n,e),n.add("[not(preceding-sibling::",s,") and not(following-sibling::",s,")]");break;case"text":o="[@type='text']";break;case"starts-with":n.add("[starts-with(normalize-space(), ",M(t,e),")]");break;case"istarts-with":n.add("[starts-with(",B(),", ",W(M(t,e)),")]");break;case"ends-with":i=M(t,e),n.add("[substring(normalize-space(), string-length(normalize-space()) - string-length(",i,") + 1) = ",i,"]");break;case"iends-with":i=M(t,e),n.add("[substring(",B(),", string-length(normalize-space()) - string-length(",i,") + 1) = ",W(i),"]");break;case"is":case"matches":g(r=n.clone(),"["+(a=A(r,t,"self::","self::node()",{predicate:!0,name:e}))+"]");break;case"not":"self::node()"!==(a=A(r=n.clone(),t,"self::","self::node()",{name:e}))&&(r.hasAxis("ancestor::")&&(a=L(r)),g(r,"[not("+a+")]"));break;case"has":g(r=n.clone(),"["+(a=A(r,t,".//","",{name:e}))+"]");break;case"has-sibling":var l=A(r=n.clone(),t,"preceding-sibling::","",{name:e});r.hasAxis("ancestor::")&&(l=L(r,"preceding-sibling::"));var u=A(r=n.clone(),t,"following-sibling::","",{name:e});r.hasAxis("ancestor::")&&(u=L(r,"following-sibling::")),n.add("{[(",l,") or (",u,")]}");break;case"has-parent":p("parent::");break;case"has-ancestor":g(r=n.clone(),"["+(a=A(r,t,"ancestor::","",{name:e}))+"]");break;case"after":p("preceding::");break;case"after-sibling":p("preceding-sibling::");break;case"before":p("following::");break;case"before-sibling":p("following-sibling::");break;case"last":o=t?"[position() > last() - "+F(t,e)+"]":"[last()]";break;case"last-of-type":s=J(n,e),n.add("[not(following-sibling::",s,")]");break;case"skip-first":n.add("[position() > ",t?F(t,e):"1","]");break;case"skip-last":n.add("[position() < last()",t?" - ("+F(t,e)+" - 1)":"","]");break;case"limit":n.add("[position() <= ",F(t,e),"]");break;case"range":var d=t.split(",");2!==d.length&&se(y+e+"(,)' is required two numbers");var f=F(d[0]),h=F(d[1]);f>=h&&se(y+e+"("+f+", "+h+")' have wrong arguments"),n.add("[position() >= ",f," and position() <= ",h,"]");break;case"target":o="[starts-with(@href, '#')]";break;case"disabled":o="[@disabled]";break;case"enabled":o="[not(@disabled)]";break;case"selected":n.add("[",c," = 'option' and @selected]");break;case"checked":n.add("[(",c," = 'input' and (@type='checkbox' or @type='radio') or ",c," = 'option') and @checked]");break;default:ae(y+e+"' is not implemented")}function p(r){var a=n.clone(),s=A(a,t,r,"",{name:e});a.hasAxis("ancestor::")&&(s=L(a,r)),g(a,"["+s+"]")}function g(e,t){n.add(e.hasOr()?"{"+t+"}":t)}o&&n.add(o)}function L(e,t){var n="";return e.childNodes.forEach((function(e){if(e.hasAxis("ancestor::")){var r="",a=e.childNodes.length-1;e.childNodes.forEach((function(e,n){n<a?r+=e.toString():(e.separator="",t&&(e.axis=t),r=e.toString()+"["+r+"]")})),n+=r}else n+=e.toString()})),n}function Z(e,t,n,r,a){te(t)&&se("argument is empty or white space");var s,i="*";if("nth-child"===e||"nth-last-child"===e){var o=function(e,t,n){var r,a="*",s=/ +of +(.+)$/,i=s.exec(t);if(null!==i){var o=n.clone();if(r=A(o,i[1],"","self::node()",{predicate:!0,name:e}),1===o.childNodes.length){var c=o.childNodes[0],l=c.childNodes[0];if("self::node()"===l.owner){l.owner="";var u="{"+c.toString()+"}";a+=u,r=u}else a="{"+r+"}",r="{["+r+"]}"}else a+=r="{["+r+"]}";return{arg:t.replace(s,""),owner:a,ofResult:r}}return null}(e,t,a);o&&(t=o.arg,i=o.owner,s=o.ofResult)}if(!function(e,t,n){if(/^(?:-?0n?|-n(?:[+-]0|-\d+)?|(?:0|-\d+)n(?:-\d+)?|(?:0|-\d+)n\+0)$/.test(e)){if(t)return!1;se(y+n+"' with these arguments yield no matches")}t&&/^1?n(?:\+[01]|-\d+)?$/.test(e)&&se(y+n+"' with these arguments in ':not()' yield no matches");return!0}(t=t.replace(/\s+/g,""),n,e))return a;var c="",l=!1,u=!1;switch(e){case"nth-child":l=!0,c=V(e,t,"preceding",i,!1,u=!n);break;case"nth-last-child":c=V(e,t,"following",i,!0,u);break;case"nth-of-type":c=V(e,t,"preceding",i=J(a,e),!1,u);break;case"nth-last-of-type":c=V(e,t,"following",i=J(a,e),!0,u);break;default:ae(y+e+"' is not implemented")}if(!c)return s&&a.add(s),a;if(u&&l){var d=a.owner&&"self::node()"!==a.owner?a.owner:"*";a.owner=i,a.add(c),(a=E(r,a,"self::","/")).owner=d}else s&&a.add(s),a.add(c);return a}function V(e,t,n,r,a,s){var i="";if(/^\d+$/.test(t)){var o=parseInt(t);i=U(n,r,{valueB:o,count:o-1,comparison:" = "},s)}else if("odd"===t)i=X(n,r," + 1",2,1);else if("even"===t)i=X(n,r," + 1",2,0);else{var c=function(e,t){var n=v.exec(e);if(null!==n){var r="-"===n[1],a=q(n[1],n[2],1),s=q(n[3],n[4],0),i=Math.abs(a),o=s-1,c=t||0===i?" = ":r?" <= ":" >= ",l="none";return t&&(r?null==n[2]||i>=s?c=" <= ":(0!==i||s<2)&&(c=" < ",o++):0!==i&&(c=" >= ")),0===a?l="pos":(r||1!==s)&&s>0?l=i>1?"both":"pos":i>1&&(l="mod"),{valueA:i,valueB:s,count:o,comparison:c,type:l}}oe(0,"parseFnNotation",v,e)}(t,a);if(c.valueA){var l=function(e){var t=1-e;return 0===t?"":(t<0?" - ":" + ")+Math.abs(t)}(c.valueB);"mod"===c.type?i=X(n,r,l,c.valueA,0):"pos"===c.type?i=U(n,r,c,s):"both"===c.type&&(i=(i=U(n,r,c,s)+X(n,r,l,c.valueA,0)).replace("]["," and "))}else i=U(n,r,c,s)}return i}function X(e,t,n,r,a){return"[(count(".concat(e,"-sibling::").concat(t,")").concat(n,") mod ").concat(r," = ").concat(a,"]")}function U(e,t,n,r){return r?"[position()".concat(n.comparison).concat(n.valueB,"]"):0===n.count&&/^<?=$/.test(n.comparison.trim())?"[not(".concat(e,"-sibling::").concat(t,")]"):"[count(".concat(e,"-sibling::").concat(t,")").concat(n.comparison).concat(n.count,"]")}function q(e,t,n){return null!=t?+((e&&"-"===e?"-":"")+t):n}function B(e){return W(e=e?_(e):"normalize-space()")}function W(e){return"translate("+e+", 'ABCDEFGHJIKLMNOPQRSTUVWXYZ"+c+"', 'abcdefghjiklmnopqrstuvwxyz"+l+"')"}function M(e,t){return e||se(y+t+"' has missing argument."),"normalize-space("+(e=_(e,t))+")"}function _(e,t){if((e=e.replace(/\\(?=.)/g,"")).includes("'")){if(!e.includes('"'))return'"'+e+'"';se((t?y+t+"' string argument":"string")+" contains both '\"' and ''' quotes")}return"'"+e+"'"}function F(e,t){var n=parseInt(e);if(Number.isInteger(n))return n;se(y+t+(e?"' argument '"+e+"' is not an integer":"' has missing argument"))}function D(e,t){p.lastIndex=e;var n=p.exec(d);if(null!==n){var r=n[0].replace("|",":").toLowerCase();return"*:"===t.owner?t.owner+=r:t.owner=r,e+n[0].length-1}oe(e,"getTagName",p)}function G(e){g.lastIndex=e;var t=g.exec(d);if(null!==t)return[e+t[0].length-1,t[0].replace(/^\\00003(?=\d+)/,"")];oe(e,"getClassValue",g)}function H(e){b.lastIndex=e;var t=b.exec(d);if(null!==t){var n=t[1];if(null!=t[2]){var r=function(e,t,n,r){for(var a=!0,s=e,i=0;e<t.length;e++){var o=t[e];if(a)o===n&&(i++,s=e+1),a=!1;else if('"'===o||"'"===o){for(;++e<t.length&&t[e]!==o;);e>=t.length&&ie(e,o,"function getArgument()",t)}else if(o===n)i++;else if(o===r&&0==--i)return{index:e,content:Y(t.substring(s,e))}}return null}(e+t[0].length-1,d,"(",")");if(r)return[r.index,n,r.content]}return[e+t[0].length-1,n,""]}oe(e,"getPseudoClass",b)}function J(e,t){var n="self::node()"!==e.owner?e.owner:e.parentNode.parentNode.owner;return t&&"*"==n&&ae(y+t+"' is required an element name; '*' is not implemented."),n}function K(e){w.lastIndex=e;var t=w.exec(d);if(null!==t){var n=t[0].toLowerCase();return[e+t[0].length-1,n]}oe(e,"getAttributeName",w)}function Q(e){k.lastIndex=e;var t,n,r=k.exec(d);if(null!==r)return t=null!=r[1]?r[1]:null!=r[2]?r[2]:r[3],null!=r[4]&&(n=r[4].toLowerCase()),[e+r[0].length-1,t,n];oe(e,"getAttributeValue",k)}function Y(e){var t=e.length;if(t>1){var n=e[0],r=e[t-1];("'"===n&&"'"===r||'"'===n&&'"'===r)&&t>2&&(e=e.substr(1,t-2))}return e}function ee(e,t){return e+1<h&&d[e+1]===t}function te(e){return null==e||!e.trim()}function ne(e){s.consoleUse||i.includes(e)||(i+=e)}function re(e){"function"==typeof s.printError&&s.printError(e)}function ae(e){throw re(e),new a(d,f+1,e)}function se(e){throw re(e),new a(d,"?",e)}function ie(e,t,n,r){throw re(n+". Unexpected character '<b>"+t+"</b>'\nposition <b>"+(e+1)+"</b>\nstring - '<b>"+r+"</b>'"),new a(r,e+1,n=n+". Unexpected character '"+t+"'")}function oe(e,t,n,r){var s=r||d.substring(e);throw re("function - <b>"+t+"()</b>\nError - RegExp failed to match the string:\nstring - '<b>"+s+"</b>'\nRegExp - '<b>"+n+"</b>'"),new a(d,e+1,"function "+t+"() - RegExp '"+n+"' failed to match the string '"+s+"'")}return function(e,n){s=t({},{axis:".//",consoleUse:!1,standard:!1,removeXPathSpaces:!1,uppercaseLetters:"",lowercaseLetters:"",postprocess:!0,debug:!1},n),i="",o="",u=[];var a,f,p=new r;try{te(e)&&se("selector is null or white space"),c=s.uppercaseLetters?s.uppercaseLetters.trim():"",l=s.lowercaseLetters?s.lowercaseLetters.trim():"",c.length!==l.length&&se("Custom upper and lower case letters have different length"),a=function(e){s.postprocess&&(s.removeXPathSpaces&&(e=e.replace(/("[^"]+"|'[^']+')|([,<=>|+-]) +| +(?=[<=>|+-])/g,(function(e,t,n){return t||n||""}))),e=(e=(e=(e=e.replace(/([([]| or )self::node\(\)\[((?:[^'"[\]]|"[^"]*"|'[^']*')+)\](?!\[| *\|)/g,"$1$2")).replace(/((?:[^'"[\]]|"[^"]*"|'[^']*')+)|\]\[(?![[(])/g,(function(e,t){return t||" and "}))).replace(/\[\(((?:[^'"()]|"[^"]*"|'[^']*')+)\)]/g,(function(e,t){return"["+t+"]"}))).replace(/\/child::/g,"/"));return e=e.replace(/((?:[^'"{}]|"[^"]*"|'[^']*')+)|[{}]/g,(function(e,t){return t||""})),e}(a=z(p,f=function(e){var t=",>+=~^!:([",n=",>+=~^!$]()";h=(d=e).length;for(var r=!1,a=!1,s="\0",i=[],o=0;o<h;o++){var c=d[o];if(" "===c||/\s/.test(c)){if(a)continue;r&&(t.includes(s)?(r=!1,a=!1):a=!0)}else if("\\"===c)(o+1>=h||/\s/.test(d[o+1]))&&ie(o,c,"Non-escape character",d),i.push(c),i.push(d[++o]);else if("/"===c&&ee(o,"*")){var l=f(o+=2,c,!0);-1===l?i.push("/*"):o=l}else if('"'===c||"'"===c){var u=f(o,c,!1);-1!==u?(i.push(d.substring(o,u+1)),o=u):ie(o,c,"function normalizeWhiteSpaces()",d),r=!0,s=c}else!a||n.includes(c)||"*"===c&&ee(o,"=")||i.push(" "),i.push(c),r=!0,a=!1,s=c}function f(e,t,n){for(;++e<h;)if(d[e]===t){if(n&&"*"!==d[e-1])continue;return e}return-1}return i.join("")}(e),s.axis,null))}catch(e){return e.parser?s.debug&&console.log(e.message,e.code,e.column):console.error(e),{xpath:a,css:f,warning:i,error:e.message}}return{xpath:a,css:f,warning:i,error:o}}}));
