/*!*******************************************
* css-to-xpath-converter 1.0.0
* https://github.com/angezid/css-to-xpath-converter
* MIT licensed
* Copyright (c) 2024â€“2025, angezid
*********************************************/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).toXPath=t()}(this,(function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t.apply(null,arguments)}function n(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,o,i=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){this.axis="",this.separator="",this.owner="",this.isClone=!1,this.parentNode=e,this.previousNode,this.childNodes,this.content,this.addChild=function(e){this.childNodes||(this.childNodes=[]),this.childNodes.push(e)},this.add=function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t];this.content||(this.content=[]),this.content.push(e)},this.hasAxis=function(e){if(this.axis===e)return!0;if(this.childNodes)for(var t=0;t<this.childNodes.length;t++)if(this.childNodes[t].hasAxis(e))return!0;return!1},this.hasOr=function(){if(this.content&&this.content.some((function(e){return" or "===e||" | "===e})))return!0;if(this.childNodes)for(var e=0;e<this.childNodes.length;e++)if(this.childNodes[e].hasOr())return!0;return!1},this.clone=function(){var e=new a;return e.owner=this.owner,e.isClone=!0,e},this.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.isClone||(e=this.separator+this.axis+this.owner,this.content&&(e+=this.content.join(""))),this.childNodes&&this.childNodes.forEach((function(t){e+=t.toString(e)})),e}}function r(e,t,n,a,s){var o=new Error(n,a,s);return o.parser=!0,o.column=t,o.code=e,Object.setPrototypeOf(o,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(o,r),o}r.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,Error):r.__proto__=Error;var s,o,i,c,l,d,u,f,h,p=new RegExp("(?:[a-zA-Z]+\\|)?(?:[a-zA-Z][^ -,.\\/:-@[-^`{-~]*)|(?:[a-zA-Z]+\\|*)","y"),b=new RegExp("(?:^\\\\00003\\d+)?(?:\\\\[^ ]|[^\\t-,.\\/:-@[-^`{-~])+","y"),g=new RegExp("((?:[a-z]+-)*[a-z]+)(?:([(])|(?=[ ,:+>~!^]|$))","y"),v=/^([+-])?([0-9]+)?n(?:([+-])([0-9]+))?$/,m=new RegExp("(?:(?:\\*|[a-zA-Z]+)\\|)?(?:\\*|[^ -,.\\/:-@[-^`{-~]+)","y"),w=new RegExp("(?:[a-zA-Z]+\\|)?[^ -,.\\/:-@[-^`{-~]+(?=(?:[~^|$!*]?=)|\\])","y"),k=new RegExp("(?:\"([^\"]*)\"|'([^']*)'|((?:\\\\[^ ]|[^ \"'\\]])+))(?: +([siSI]))?(?=\\])","y"),x=Object.freeze({Text:0,PseudoClass:1,AttributeName:2,AttributeValue:3}),y="Pseudo-class ':",N="preceding-sibling::",A="following-sibling::",S="\nSystem.Xml.XPath.XPathNavigator doesn't support '*' as a namespace.";function z(e,t,n,a,r){t||de("The pseudo-selector ':"+r.name+"()' have missing argument."),d.push(u);var s=E(e,t,n,a,r);return u=d.pop(),h=u.length,s}function E(e,t,a,r,s){t||de("selector is empty or white space");var o,i,c=$(e,null),l=$(c,null),d=s?s.name:"",p=s&&s.predicate,g="not"===d,v=null,m=null,w=null,k=null,y=x.Text,z=!1,E=!0,Z=-1;for(h=(u=t).length,/^[,(]/.test(u)&&ue(0,u[0],"State.Text",u);++Z<h;)if(f=Z,i=u[Z],y===x.Text){switch((z&&!/[>+~^!.#*:|[@a-zA-Z]/.test(i)||!z&&!/[ >+~^!,.#*:|[@a-zA-Z]/.test(i))&&ue(Z,i,O(y)+", check="+z,u),s&&/!?[+~]/.test(i)&&d.endsWith("-sibling")&&de("'"+d+"()' with these arguments has no implementation"),(/[.#:[]/.test(i)||"has"!==d&&l.previousNode&&/[>+~^!]/.test(i))&&(P(a,l,s),T(r,l)),i){case".":var U="[";do{var q=n(Y(Z+1),2);if(Z=q[0],U+=V("@class",J(" "+(o=q[1])+" ")),b.lastIndex=Z+2,!se(Z,".")||!b.test(u))break;U+=" and "}while(++Z<h);l.add(U+"]"),z=!1;break;case"#":var M=n(Y(Z+1),2);Z=M[0],o=M[1],l.add("[@id=",J(o),"]"),z=!1;break;case">":l=g?C(c,l,"parent::"):$(c,l,"child::","/"),z=!0;break;case"+":l=j(c,l,g?N:A,"*","{[1]}"),z=!0;break;case"~":l=g?C(c,l,N):$(c,l,A,"/"),z=!0;break;case"^":l=g?C(c,l,"parent::",B(N)):j(c,l,"child::","*","[1]"),z=!0;break;case"!":se(Z,"^")?(l=g?C(c,l,"parent::",B(A)):j(c,l,"child::","*","[last()]"),Z++):se(Z,"+")?(l=g?j(c,l,A,"*","{[1]}"):j(c,l,N,"*","[1]"),Z++):se(Z,">")?(l=g?C(c,l,"child::"):$(c,l,"parent::","/"),Z++):se(Z,"~")?(l=g?C(c,l,A):$(c,l,N,"/"),Z++):l=g?C(c,l,"descendant-or-self::"):$(c,l,"ancestor-or-self::","/"),z=!0;break;case"[":v="",m=null,w=null,k=null,y=x.AttributeName;break;case":":se(Z,":")&&Z++,y=x.PseudoClass;break;case",":Z+1>=h&&ue(Z,i,O(y),u),(c=$(e,c)).add(p?" or ":" | "),c=$(e,c),l=$(c,null,s?"":a),z=!0;break;case"@":var _=n(L(Z,a,s,c,l),2);Z=_[0],l=_[1],z=!1;break;case"*":P(a,l,s),l.owner="*",z=!1;break;case" ":s?"has-ancestor"===d?l=$(c,l,"ancestor::"," and "):["has-parent","before","after"].includes(d)||d.endsWith("-sibling")?(l.previousNode||(l.axis="ancestor::",l.separator=""),l=$(c,l,"ancestor::"," and ")):"not"===d&&"self::"===l.axis?(l.previousNode&&"ancestor::"===l.previousNode.axis&&(l.separator=" and "),l.and=!0,l=C(c,l,"ancestor::")):l=$(c,l,null,"//"):l=$(c,l,null,"//"),z=!0;break;case"|":if(se(Z,"|"))ue(Z+1,i,O(y),u);else{var F=n(I(Z,a,E,c,l),2);Z=F[0],l=F[1]}z=!1;break;case"\\":Z++;break;default:/[a-zA-Z]/.test(i)?(l.owner&&ue(Z,i,O(y),u),P(a,l,s),Z=Q(Z,l)):ue(Z,i,O(y),u),z=!1}E=!1}else if(y===x.AttributeName)switch(i){case"=":k="=",m=null,y=x.AttributeValue;break;case"!":case"~":case"^":case"$":case"*":case"|":se(Z,"=")?(k=i+"=",Z++,m=null,y=x.AttributeValue):"*"===i&&se(Z,"|")?(v="*:",Z++,ie(S)):ue(Z,i,O(y),u);break;case"]":v||le("attrName is null or empty.'"),l.add("[@"+v+"]"),y=x.Text,z=!1;break;case" ":break;default:var D=n(ne(Z),2);Z=D[0],v+=o=D[1]}else if(y===x.AttributeValue)switch(i){case"]":null===m&&le("attrValue is null."),R(v,m,k,w,l),y=x.Text,z=!1;break;case"=":ue(Z,i,O(y),u);break;case" ":break;default:m&&le("attrValue '"+m+"' is already parse: "+u.substring(Z));var G=n(ae(Z),3);Z=G[0],m=G[1],w=G[2]}else if(y===x.PseudoClass){var H,K="",te=n(ee(Z),3);Z=te[0],K=te[1],H=te[2],"root"===K?(l.owner=l.separator="",l.axis="//",(l=$(c,l,"ancestor-or-self::")).owner="*",l.add("[last()]")):(T(r,l),K.startsWith("nth-")?W(K,H,s,l):X(K,H,g,l)),y=x.Text,z=!1}var re=e.toString();return z&&/(?:\/|::)$/.test(re)?re+"*":((z||y!==x.Text)&&le("Something is wrong: '"+O(y)+"' xpath='"+re+"' in: "+u),re)}function O(e){return"State."+Object.keys(x)[e]}function $(e,t,n,r){var s=new a(e);return e.addChild(s),s.previousNode=t,s.axis=n||"",r&&t.owner&&(s.separator=r),s}function C(e,t,n,a){"node()"===t.owner&&(t.owner="*"),t.axis=n;var r=$(e,t,"self::","/");return a&&r.add(a),r}function j(e,t,n,a,r){var s=$(e,t,n,"/");return s.owner=a,s.add(r),$(e,s,"self::","/")}function P(e,t,n){if(e&&!t.axis&&("self::"!==e||n)){var a=t.parentNode.toString().trim(),r=a.length;if(0==r||/ (?:or|\|)$/.test(a))t.axis=e;else{var s=a[r-1];":"!=s&&"|"!=s||(t.axis=e)}}}function T(e,t){if(!t.owner){var n="";if(t.previousNode){var a=t.parentNode.toString().trim();if(a.length)if(/(?: or|\|)$/.test(a))n=e||"*";else{var r=a[a.length-1];e?":"===r?n="*":"/"===r&&(n=e):":"!==r&&"/"!==r||(n="*")}}else n=e||"*";t.owner=n}}function I(e,t,n,a,r){if("*"==r.owner)se(e,"*")?(r.owner="*:*",e++):r.owner="*:",ie(S);else if(n&&P(t,r),se(e,"*"))r.owner?r.owner+=":*":(r.owner="*",r.add("[not(contains(name(), ':'))]")),e++;else{if(e+1<h&&/[a-zA-Z]/.test(u[e+1])){var s=$(a,r,"self::","/");return s.owner="*",[e,s]}r.owner="*:",ie(S)}return[e,r]}function L(e,t,n,a,r){var s=r.parentNode.toString().trim();if(0===s.length)n&&(t="");else if(/ (?:or|\|)$/.test(s))t="";else{var o=s[s.length-1];t=":"!==o&&"/"!==o?"/":""}m.lastIndex=e+1;var i=m.exec(u);if(null!==i){var c=$(a,r,t);return c.add("@",i[0].replace("|",":").toLowerCase()),[e+i[0].length,c]}fe(e,"parseAttribute",m)}function R(e,t,n,a,r){if(t.trim()){var o="i"===a||"lang"===e||"type"===e&&"input"==te(r);if(s.standard||"class"!==e){var i=o?G("@"+e):null,c=J(t);switch(n){case"=":o?r.add("[",i," = ",D(t),"]"):r.add("[@",e,"=",c,"]");break;case"!=":o?r.add("{[not(@",e,") or ",i,"!=",D(t),"]}"):r.add("{[not(@",e,") or @",e,"!=",c,"]}");break;case"~=":o?r.add("[contains(concat(' ', normalize-space(",i,"), ' '), concat(' ', normalize-space(",D(t),"), ' '))]"):r.add("[contains(concat(' ', normalize-space(@",e,"), ' '), concat(' ', normalize-space(",c,"), ' '))]");break;case"|=":o?r.add("{[",i," = ",D(t)," or starts-with(",i,", concat(",D(t),", '-'))]}"):r.add("{[@",e," = ",c," or starts-with(@",e,", ",J(t+"-"),")]}");break;case"^=":o?r.add("[starts-with(",i,", ",D(t),")]"):r.add("[starts-with(@",e,", ",c,")]");break;case"$=":o?r.add(Z(i,"@"+e,c,D(t))):r.add(Z("@"+e,"@"+e,c,c));break;case"*=":o?r.add("[contains(",i,", ",D(t),")]"):r.add("[contains(@",e,", ",c,")]")}}else!function(e,t,n,a){var r=n?G("@class"):"@class",s=e.trim();switch(t){case"=":case"~=":case"!=":s=" "+s+" ";break;case"^=":s=" "+s;break;case"$=":s+=" "}s=n?D(s):J(s);if("!="===t)a.add("{[not(",r,") or not(",V(r,s),")]}");else if("*="===t)a.add("[contains(",r,", ",s,")]");else if("|="===t){var o=n?D(" "+e+" "):J(" "+e+" "),i=n?D(" "+e+"-"):J(" "+e+"-");a.add("{[",V(r,o)," or ",V(r,i),"]}")}else a.add("[",V(r,s),"]")}(t,n,o,r)}else"="===n?r.add("[@",e," = '']"):"!="===n?r.add("{[not(@",e,") or @",e," != '']}"):"|="===n?r.add("{[@",e," = '' or starts-with(@",e,", '-')]}"):r.add("[false()]")}function Z(e,t,n,a){return"[substring("+e+", string-length("+t+") - (string-length("+n+") - 1)) = "+a+"]"}function V(e,t){return"contains(concat(' ', normalize-space(".concat(e,"), ' '), ").concat(t,")")}function X(e,t,n,a){var r,s,o,i,c="",l="local-name()";switch(e){case"any-link":a.add("[(",l," = 'a' or ",l," = 'area') and @href]");break;case"external":a.add("{[(",l," = 'a' or ",l," = 'area') and (starts-with(@href, 'https://') or starts-with(@href, 'http://'))]}");break;case"contains":a.add("[contains(normalize-space(), ",H(t,e),")]");break;case"icontains":a.add("[contains(",D(),", ",G(H(t,e)),")]");break;case"empty":a.add("[not(*) and not(text())]");break;case"first-child":a.add(B(N));break;case"first":n?a.add(t?v(N," <= "):B(N)):a.add(t?"[position() <= "+K(t,e)+"]":"[1]");break;case"first-of-type":o=te(a,e),a.add(B(N,o));break;case"gt":case"skip":n?a.add(v(N," > ")):a.add("[position() > ",K(t,e),"]");break;case"lt":n?a.add(v(N," <= ")):a.add("[position() < ",K(t,e),"]");break;case"eq":case"nth":n?a.add(v(N," = ")):a.add("[",K(t,e),"]");break;case"last-child":a.add(B(A));break;case"only-child":a.add("[not(",N,"*) and not(",A,"*)]");break;case"only-of-type":o=te(a,e),a.add("[not(",N,o,") and not(",A,o,")]");break;case"text":a.add("[@type='text']");break;case"starts-with":a.add("[starts-with(normalize-space(), ",H(t,e),")]");break;case"istarts-with":a.add("[starts-with(",D(),", ",G(H(t,e)),")]");break;case"ends-with":i=H(t,e),a.add(Z("normalize-space()","normalize-space()",i,i));break;case"iends-with":i=H(t,e),a.add(Z(D(),"normalize-space()",i,G(i)));break;case"is":case"matches":g(r=a.clone(),"["+(s=z(r,t,"self::","node()",{predicate:!0,name:e}))+"]");break;case"not":"self::node()"!==(s=z(r=a.clone(),t,"self::","node()",{name:e}))&&(s=function(e){var t="";return e.childNodes.forEach((function(e){if(e.childNodes){for(var n="",a="",r=!1,s=e.childNodes.length-1;s>=0;s--){var o=e.childNodes[s];r?(o.separator="",n+="["+o.toString(),a+="]"):(o.separator&&(r=!0,o.separator=""),n+=o.toString())}t+=n+a}else t+=e.toString()})),t}(r),g(r,"[not("+s+")]"));break;case"has":g(r=a.clone(),"["+(s=z(r,t,".//",null,{name:e}))+"]");break;case"has-sibling":var d=z(r=a.clone(),t,N,null,{name:e});r.hasAxis("ancestor::")&&(d=U(r,N));var u=z(r=a.clone(),t,A,null,{name:e});r.hasAxis("ancestor::")&&(u=U(r,A)),a.add("{[(",d,") or (",u,")]}");break;case"has-parent":b("parent::");break;case"has-ancestor":g(r=a.clone(),"["+(s=z(r,t,"ancestor::",null,{name:e}))+"]");break;case"after":b("preceding::");break;case"after-sibling":b(N);break;case"before":b("following::");break;case"before-sibling":b(A);break;case"last":n?a.add(t?v(A," <= "):B(A)):a.add(t?"[position() > last() - "+K(t,e)+"]":"[last()]");break;case"last-of-type":o=te(a,e),a.add(B(A,o));break;case"skip-first":n?a.add(t?v(N," > "):B(N)):a.add("[position() > ",t?K(t,e):"1","]");break;case"skip-last":n?a.add(t?v(A," > "):B(A)):a.add("[position() < last()",t?" - "+(K(t,e)-1):"","]");break;case"limit":n?a.add(v(N," <= ")):a.add("[position() <= ",K(t,e),"]");break;case"range":var f=t.split(",");2!==f.length&&de(y+e+"(,)' is required two numbers");var h=K(f[0],e),p=K(f[1],e);h>=p&&de(y+e+"("+h+", "+p+")' have wrong arguments"),n?(c=_(N,"*",{count:h-1,comparison:" >= "}),c+=_(N,"*",{count:p-1,comparison:" <= "}),a.add(c.replace("]["," and "))):a.add("[position() >= ",h," and position() <= ",p,"]");break;case"target":a.add("[starts-with(@href, '#')]");break;case"disabled":a.add("[@disabled]");break;case"enabled":a.add("[not(@disabled)]");break;case"selected":a.add("[",l," = 'option' and @selected]");break;case"checked":a.add("[(",l," = 'input' and (@type='checkbox' or @type='radio') or ",l," = 'option') and @checked]");break;case"read-only":case"read-write":a.add("[@",e.replace("-",""),"]");break;default:le(y+e+"' is not implemented")}function b(n){var r=a.clone(),s=z(r,t,n,null,{name:e});r.hasAxis("ancestor::")&&(s=U(r,n)),g(r,"["+s+"]")}function g(e,t){a.add(e.hasOr()?"{"+t+"}":t)}function v(n,a){return _(n,"*",{count:K(t,e)-1,comparison:a})}}function U(e,t){var n="";return e.childNodes.forEach((function(e){if(e.hasAxis("ancestor::")){var a="",r=e.childNodes.length-1;e.childNodes.forEach((function(e,n){n<r?a+=e.toString():(e.axis=t,e.separator="",a=e.toString()+"["+a+"]")})),n+=a}else n+=e.toString()})),n}function W(e,t,n,a){oe(t)&&de("argument is null or white space");var r,s="*",o="";if("nth-child"===e||"nth-last-child"===e){var i=function(e,t,n){var a,r="*",s=/ +of +(.+)$/,o=s.exec(t);if(null!==o){var i=n.clone();if(a=z(i,o[1],null,"self::node()",{predicate:!0,name:e}),1===i.childNodes.length){var c=i.childNodes[0],l=c.childNodes[0],d="self::node()"===l.owner;l.owner="";var u="{"+c.toString()+"}";d?(r+=u,a=u):(r="{"+a+"}",a=u)}else r+=a="{["+a+"]}";return{arg:t.replace(s,""),owner:r,ofResult:a}}return null}(e,t,a);i&&(t=i.arg,s=i.owner,r=i.ofResult)}if(function(e,t,n){var a=t&&"not"===t.name,r="' with these arguments yield no matches";if(/^(?:-?0n?|-n(?:[+-]0|-\d+)?|(?:0|-\d+)n(?:-\d+)?|(?:0|-\d+)n\+0)$/.test(e)){if(a)return!1;de(y+n+r)}a&&/^1?n(?:\+[01]|-\d+)?$/.test(e)&&de(y+n+r+" in ':not()'");return!0}(t=t.replace(/\s+/g,""),n,e)){switch(e){case"nth-child":o=q(e,t,N,s,!1);break;case"nth-last-child":o=q(e,t,A,s,!0);break;case"nth-of-type":s=te(a,e),o=q(e,t,N,s,!1);break;case"nth-last-of-type":s=te(a,e),o=q(e,t,A,s,!0);break;default:le(y+e+"' is not implemented")}r&&a.add(r),a.add(o)}}function q(e,t,n,a,r){var s="";if(/^\d+$/.test(t))s=_(n,a,{count:parseInt(t)-1,comparison:" = "});else if("odd"===t)s=M(n,a," + 1",2,1);else if("even"===t)s=M(n,a," + 1",2,0);else{var o=function(e,t){var n=v.exec(e);if(null!==n){var a="-"===n[1],r=F(n[1],n[2],1),s=F(n[3],n[4],0),o=Math.abs(r),i=s-1,c=t||0===o?" = ":a?" <= ":" >= ",l="none";return t&&(a?null==n[2]||o>=s?c=" <= ":(0!==o||s<2)&&(c=" < ",i++):0!==o&&(c=" >= ")),0===r?l="cnt":(a||1!==s)&&s>0?l=o>1?"both":"cnt":o>1&&(l="mod"),{valueA:o,valueB:s,count:i,comparison:c,type:l}}fe(0,"parseFnNotation",v,e)}(t,r);if(o.valueA){var i=function(e){var t=1-e;return 0===t?"":(t<0?" - ":" + ")+Math.abs(t)}(o.valueB);"mod"===o.type?s=M(n,a,i,o.valueA,0):"cnt"===o.type?s=_(n,a,o):"both"===o.type&&(s=(s=_(n,a,o)+M(n,a,i,o.valueA,0)).replace("]["," and "))}else s=_(n,a,o)}return s}function M(e,t,n,a,r){return"[(count(".concat(e).concat(t,")").concat(n,") mod ").concat(a," = ").concat(r,"]")}function _(e,t,n){return 0===n.count&&/^<?=$/.test(n.comparison.trim())?B(e,t):"[count(".concat(e).concat(t,")").concat(n.comparison).concat(n.count,"]")}function B(e,t){return"[not(".concat(e).concat(t||"*",")]")}function F(e,t,n){return null!=t?+((e&&"-"===e?"-":"")+t):n}function D(e){return G(e=e?J(e):"normalize-space()")}function G(e){var t="ABCDEFGHJIKLMNOPQRSTUVWXYZ";return"translate("+e+", '"+t+c+"', '"+t.toLowerCase()+l+"')"}function H(e,t){return e||de(y+t+"' has missing argument."),"normalize-space("+(e=J(e,t))+")"}function J(e,t){if((e=e.replace(/\\(?=.)/g,"")).includes("'")){if(!e.includes('"'))return'"'+e+'"';de((t?y+t+"' string argument":"string")+" contains both '\"' and ''' quotes")}return"'"+e+"'"}function K(e,t){var n=parseInt(e);if(Number.isInteger(n))return n;de(y+t+(e?"' argument '"+e+"' is not an integer":"' has missing argument"))}function Q(e,t){p.lastIndex=e;var n=p.exec(u);if(null!==n){var a=n[0].replace("|",":").toLowerCase();return"*:"===t.owner?t.owner+=a:t.owner=a,e+n[0].length-1}fe(e,"getTagName",p)}function Y(e){b.lastIndex=e;var t=b.exec(u);if(null!==t)return[e+t[0].length-1,t[0].replace(/^\\00003(?=\d+)/,"")];fe(e,"getClassValue",b)}function ee(e){g.lastIndex=e;var t=g.exec(u);if(null!==t){var n=t[1];if(null!=t[2]){var a=function(e,t,n,a){for(var r=!0,s=e,o=0;e<t.length;e++){var i=t[e];if(r)i===n&&(o++,s=e+1),r=!1;else if('"'===i||"'"===i){for(;++e<t.length&&t[e]!==i;);e>=t.length&&ue(e,i,"function getArgument()",t)}else if(i===n)o++;else if(i===a&&0==--o)return{index:e,content:re(t.substring(s,e))}}return null}(e+t[0].length-1,u,"(",")");if(a)return[a.index,n,a.content]}return[e+t[0].length-1,n,""]}fe(e,"getPseudoClass",g)}function te(e,t){var n="node()"!==e.owner?e.owner:e.parentNode.parentNode.owner;return t&&"*"==n&&le(y+t+"' is required an element name; '*' is not implemented."),n}function ne(e){w.lastIndex=e;var t=w.exec(u);if(null!==t){var n=t[0].toLowerCase();return[e+t[0].length-1,n]}fe(e,"getAttributeName",w)}function ae(e){k.lastIndex=e;var t,n,a=k.exec(u);if(null!==a)return t=null!=a[1]?a[1]:null!=a[2]?a[2]:a[3],null!=a[4]&&(n=a[4].toLowerCase()),[e+a[0].length-1,t,n];fe(e,"getAttributeValue",k)}function re(e){var t=e.length;if(t>1){var n=e[0],a=e[t-1];("'"===n&&"'"===a||'"'===n&&'"'===a)&&t>2&&(e=e.substr(1,t-2))}return e}function se(e,t){return e+1<h&&u[e+1]===t}function oe(e){return null==e||!e.trim()}function ie(e){s.consoleUse||o.includes(e)||(o+=e)}function ce(e){"function"==typeof s.printError&&s.printError(e)}function le(e){throw ce(e),new r(u,f+1,e)}function de(e){throw ce(e),new r(u,"?",e)}function ue(e,t,n,a){throw ce(n+". Unexpected character '<b>"+t+"</b>'\nposition <b>"+(e+1)+"</b>\nstring - '<b>"+a+"</b>'"),new r(a,e+1,n=n+". Unexpected character '"+t+"'")}function fe(e,t,n,a){var s=a||u.substring(e);throw ce("function - <b>"+t+"()</b>\nError - RegExp failed to match the string:\nstring - '<b>"+s+"</b>'\nRegExp - '<b>"+n+"</b>'"),new r(u,e+1,"function "+t+"() - RegExp '"+n+"' failed to match the string '"+s+"'")}return function(e,n){s=t({},{axis:".//",consoleUse:!1,standard:!1,removeXPathSpaces:!1,uppercaseLetters:"",lowercaseLetters:"",postprocess:!0,debug:!1},n),o="",i="",d=[];var r,f,p=new a;try{oe(e)&&de("selector is null or white space"),c=s.uppercaseLetters?s.uppercaseLetters.trim():"",l=s.lowercaseLetters?s.lowercaseLetters.trim():"",c.length!==l.length&&de("Custom upper and lower case letters have different length"),r=function(e){s.postprocess&&(s.removeXPathSpaces&&(e=e.replace(/("[^"]+"|'[^']+')|([,<=>|+-]) +| +(?=[<=>|+-])/g,(function(e,t,n){return t||n||""}))),e=(e=(e=(e=e.replace(/([([]| or )self::node\(\)\[((?:[^'"[\]]|"[^"]*"|'[^']*')+)\](?!\[| *\|)/g,"$1$2")).replace(/((?:[^'"[\]]|"[^"]*"|'[^']*')+)|\]\[(?![[(])/g,(function(e,t){return t||" and "}))).replace(/\[\(((?:[^'"()]|"[^"]*"|'[^']*')+)\)]/g,(function(e,t){return"["+t+"]"}))).replace(/\/child::/g,"/"));return e=e.replace(/((?:[^'"{}]|"[^"]*"|'[^']*')+)|[{}]/g,(function(e,t){return t||""})),e}(r=E(p,f=function(e){var t=",>+=~^!:([",n=",>+=~^!$]()";h=(u=e).length;for(var a=!1,r=!1,s="\0",o=[],i=0;i<h;i++){var c=u[i];if(" "===c||/\s/.test(c)){if(r)continue;a&&(t.includes(s)?(a=!1,r=!1):r=!0)}else if("\\"===c)(i+1>=h||/\s/.test(u[i+1]))&&ue(i,c,"Non-escape character",u),o.push(c,u[++i]);else if("/"===c&&se(i,"*")){var l=f(i+=2,c,!0);-1===l?o.push("/*"):i=l}else if('"'===c||"'"===c){var d=f(i,c,!1);-1!==d?(o.push(u.substring(i,d+1)),i=d):ue(i,c,"function normalizeWhiteSpaces()",u),a=!0,s=c}else!r||n.includes(c)||"*"===c&&se(i,"=")||o.push(" "),o.push(c),a=!0,r=!1,s=c}function f(e,t,n){for(;++e<h;)if(u[e]===t){if(n&&"*"!==u[e-1])continue;return e}return-1}return o.join("")}(e),s.axis,null))}catch(e){return e.parser?s.debug&&console.log(e.message,e.code,e.column):console.error(e),{xpath:r,css:f,warning:o,error:e.message}}return{xpath:r,css:f,warning:o,error:i}}}));
